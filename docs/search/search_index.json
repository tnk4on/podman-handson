{"config":{"lang":["ja"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Podman\u30cf\u30f3\u30ba\u30aa\u30f3","text":""},{"location":"#_1","title":"\u306f\u3058\u3081\u306b","text":"<ul> <li>\u958b\u59cb\u65b9\u6cd5\uff1a\u2192\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u59cb\u3081\u308b\u524d\u306b\u304a\u8aad\u307f\u304f\u3060\u3055\u3044</li> <li>\u30cf\u30f3\u30ba\u30aa\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff1a\u2192\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002Podman\u30a4\u30f3\u30fb\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5404\u7ae0\u3054\u3068\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u516c\u958b\u30dd\u30fc\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\uff1a\u2192\u30b3\u30f3\u30c6\u30ca\u3067\u516c\u958b\u3057\u305f\u30dd\u30fc\u30c8\u3078\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"appendixA/","title":"Appendix A : Podman\u95a2\u9023\u306e\u30b3\u30f3\u30c6\u30ca\u30c4\u30fc\u30eb","text":"<ul> <li>\u30ec\u30d9\u30eb:\u521d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"appendixA/#skopeo","title":"Skopeo","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_1","title":"\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_2","title":"\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u306b\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_3","title":"\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u306e\u4e2d\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_4","title":"\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u306b\u30db\u30b9\u30c8\u304b\u3089\u76f4\u63a5\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8ffd\u52a0\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_5","title":"\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_6","title":"\u4f5c\u696d\u7528\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#_7","title":"\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.7\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixA/#containerfile","title":"Containerfile\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter A.2.8\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixB/","title":"Appendix B : OCI\u30e9\u30f3\u30bf\u30a4\u30e0","text":"<ul> <li>\u30ec\u30d9\u30eb:\u521d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"appendixB/#oci","title":"OCI\u30e9\u30f3\u30bf\u30a4\u30e0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter B\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixB/#crun","title":"crun","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter B.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"appendixB/#kata","title":"kata","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter B.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p>"},{"location":"browser-access/","title":"\u30b3\u30f3\u30c6\u30ca\u3067\u8d77\u52d5\u3057\u305f\u30dd\u30fc\u30c8\u306b\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u65b9\u6cd5","text":"<p><code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3067<code>-p 8080:8080</code>\u306e\u3088\u3046\u306b\u516c\u958b\u3057\u305fWeb\u30b5\u30fc\u30d3\u30b9\u306e\u30dd\u30fc\u30c8\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u884c\u3044\u307e\u3059\u3002</p> <ul> <li> <code>RHEL Web Console</code>\u3092\u62bc\u3057\u307e\u3059<ul> <li>\u30d6\u30e9\u30a6\u30b6\u306e\u5225\u306e\u30bf\u30d6\u3067RHEL\u306eWeb\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u958b\u304d\u307e\u3059</li> </ul> </li> <li>URL\u3092\u63a7\u3048\u307e\u3059<ul> <li>URL\u4f8b\uff1a<code>https://rhel.ap600uyh25ly.instruqt.io:9090/</code></li> </ul> </li> <li><code>http://</code>\u306b\u7d9a\u3051\u3066<code>\u30b5\u30fc\u30d0\u30fc\u306e\u30a2\u30c9\u30ec\u30b9:\u30dd\u30fc\u30c8\u756a\u53f7</code>\u306e\u5f62\u5f0f\u3067\u30d6\u30e9\u30a6\u30b6\u306e\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306b\u5165\u529b\u3057\u307e\u3059<ul> <li>\u4f8b\u3048\u3070\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u304c<code>8080</code>\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u5834\u5408</li> <li><code>http://rhel.ap600uyh25ly.instruqt.io:8080</code></li> </ul> </li> <li>\u30b3\u30f3\u30c6\u30ca\u4e0a\u306eWeb\u30b5\u30fc\u30d3\u30b9\u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059</li> </ul>"},{"location":"chapter10/","title":"Chapter 10 \u30b3\u30f3\u30c6\u30ca\u9694\u96e2\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e0a\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:30\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter10/#linux","title":"\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306eLinux\u30ab\u30fc\u30cd\u30eb\u64ec\u4f3c\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0","text":""},{"location":"chapter10/#_1","title":"\u30de\u30b9\u30af\u3055\u308c\u305f\u30d1\u30b9\u306e\u89e3\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 ls /proc/scsi\n$ podman run --rm --security-opt unmask=/proc/scsi ubi8 ls /proc/scsi\n$ podman run --rm --security-opt unmask=/proc/* ubi8 ls /proc/scsi\n$ man podman run\n</code></pre></p>"},{"location":"chapter10/#_2","title":"\u30de\u30b9\u30af\u3055\u308c\u308b\u30d1\u30b9\u306e\u8ffd\u52a0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 ls /proc/sys/dev\n$ podman run --rm --security-opt mask=/proc/sys/dev ubi8 ls /proc/sys/dev\n$ podman run --rm ubi8 cat /proc/self/mountinfo\n</code></pre></p>"},{"location":"chapter10/#linux_1","title":"Linux\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ capsh --print\n</code></pre></p>"},{"location":"chapter10/#linux_2","title":"Linux\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3\u306e\u524a\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.2.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 capsh --print\n</code></pre></p>"},{"location":"chapter10/#_3","title":"\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3\u306e\u524a\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.2.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --cap-drop CAP_NET_BIND_SERVICE ubi8 capsh --print\n</code></pre></p> <p>Original <pre><code>$ podman run --cap-drop all ubi8 capsh --print\n</code></pre></p>"},{"location":"chapter10/#_4","title":"\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3\u306e\u8ffd\u52a0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.2.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --cap-add CAP_NET_RAW ubi8 capsh --print\n</code></pre></p> <p>Original <pre><code>$ podman run --cap-drop=all --cap-add CAP_NET_RAW ubi8 capsh --print\n</code></pre></p>"},{"location":"chapter10/#103-uid","title":"10.3 \u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u306b\u3088\u308bUID\u306e\u5206\u96e2","text":""},{"location":"chapter10/#-usernsauto","title":"--userns=auto\u30d5\u30e9\u30b0\u3092\u5229\u7528\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306e\u9694\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.3.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code># cat /etc/subuid\n# cat /etc/subgid\n</code></pre></p> <p>Original <pre><code># podman run --userns=auto ubi8 cat /proc/self/uid_map\n# podman run --user=2000 --userns=auto ubi8 cat /proc/self/uid_map\n# podman run --userns=auto:size=5000 ubi8 cat /proc/self/uid_map\n# podman run --rm --userns=auto ubi8 cat /proc/self/uid_map\n# podman run --rm --userns=auto ubi8 cat /proc/self/uid_map\n</code></pre></p>"},{"location":"chapter10/#linux_3","title":"\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u5185\u306eLinux\u306e\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.3.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code># podman run --rm ubi8 capsh --print | grep Current\n# podman run --rm --userns=auto ubi8 capsh --print | grep Current\n# podman run --rm --userns=auto:size=5000 ubi8 chown 6000 /etc/motd\n# podman run --rm --userns=auto:size=5000 ubi8 chown 4000 /etc/motd\n</code></pre></p>"},{"location":"chapter10/#podman-usernsauto","title":"\u30eb\u30fc\u30c8\u30ec\u30b9Podman\u306b\u304a\u3051\u308b--userns=auto\u30d5\u30e9\u30b0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.3.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --userns=auto ubi8 cat /proc/self/uid_map\n$ podman run --userns=auto ubi8 cat /proc/self/uid_map\n$ podman run --rm ubi8 cat /proc/self/uid_map\n</code></pre></p> <p>Original <pre><code># mkdir /mnt/test\n# ls -ld /mnt/test\n# podman run --rm -v /mnt/test:/mnt/test --userns=auto ubi8 ls -ld /mnt/test\n# podman run --rm -v /mnt/test:/mnt/test:Z --userns=auto ubi8 touch /mnt/test/test1\n</code></pre></p>"},{"location":"chapter10/#-usernsauto_1","title":"\u30e6\u30fc\u30b6\u30fc\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u304a\u3051\u308b--userns=auto\u30d5\u30e9\u30b0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.3.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code># ls -ld /mnt/test\n# podman run --rm -v /mnt/test:/mnt/test:Z,U --userns=auto ubi8 touch /mnt/test/test1\n# ls -ld /mnt/test\n# chown -R root:root /mnt/test\n# podman run --rm -v /mnt/test:/mnt/test:idmap,Z --userns=auto ubi8 ls -ld /mnt/test\n# podman run --rm -v /mnt/test:/mnt/test:idmap,Z --userns=auto ubi8 touch /mnt/test/test\n# ls -l /mnt/test\n</code></pre></p>"},{"location":"chapter10/#104-pid","title":"10.4 PID\u540d\u524d\u7a7a\u9593\u306b\u3088\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u5206\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 find /proc -maxdepth 1 -type d -regex \".*/[0-9]*\"\n</code></pre></p>"},{"location":"chapter10/#105","title":"10.5 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u540d\u524d\u7a7a\u9593\u306b\u3088\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5206\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman network create net1\n$ podman network create net2\n</code></pre></p> <p>Original <pre><code>$ podman run -d --network net1 --name cnet1 ubi8 sleep 1000\n$ podman run --network net1 alpine ping -c 1 cnet1\n</code></pre></p> <p>Original <pre><code>$ podman run --rm alpine ping -c 1 cnet1\n$ podman run alpine ping -c 1 10.89.0.4\n$ podman run --rm --network net2 alpine ping -c 1 cnet1\n</code></pre></p>"},{"location":"chapter10/#106-ipcipc","title":"10.6 IPC\u540d\u524d\u7a7a\u9593\u306b\u3088\u308bIPC\u306e\u5206\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run -d --rm --name ipc1 ubi8 bash -c \"touch /dev/shm/ipc1; sleep 1000\"\n$ podman run --rm ubi8 ls /dev/shm\n$ podman run --rm --ipc=container:ipc1 ubi8 ls /dev/shm\n</code></pre></p>"},{"location":"chapter10/#108-selinux","title":"10.8 SELinux\u306b\u3088\u308b\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u5206\u96e2","text":""},{"location":"chapter10/#selinux-type-enforcement","title":"SELinux type enforcement","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.8.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 cat /proc/self/attr/current\n$ podman run --rm --privileged ubi8 cat /proc/self/attr/current\n$ podman run --rm ubi8 ls -Z /\n$ ls -1Z $HOME/.ssh/\n$ podman run -v $HOME/.ssh:/.ssh ubi8 ls /.ssh\n</code></pre></p> <p>Original <pre><code>$ mkdir foo\n$ ls -Zd foo\n$ podman run -v ./foo:/foo ubi8 touch /foo/bar\n$ podman run --privileged -v ./foo:/foo ubi8 touch /foo/bar\n$ ls -Z foo\n$ rm foo/bar\n$ podman run -v ./foo:/foo:Z ubi8 touch /foo/bar\n$ ls -Z ./foo\n</code></pre></p>"},{"location":"chapter10/#selinuxmulti-category-security","title":"SELinux\u306eMulti-Category Security\u306b\u3088\u308b\u5206\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.8.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --rm ubi8 cat /proc/self/attr/current\n$ podman run --rm ubi8 cat /proc/self/attr/current\n</code></pre></p> <p>Original <pre><code>$ ls -Z ./foo\n$ podman run -v ./foo:/foo ubi8 touch /foo/bar\n$ podman run --security-opt label=level:s0:c454,c510 -v ./foo:/foo ubi8 touch /foo/bar\n</code></pre></p> <p>Original <pre><code>$ podman run -v ./foo:/foo:z ubi8 touch /foo/bar\n$ ls -Z foo/\n$ podman run --rm -v ./foo:/foo ubi8 touch /foo/bar\n</code></pre></p> <p>Original <pre><code>$ podman run --rm --security-opt label=disable ubi8 cat /proc/self/attr/current\n$ podman run --rm -v $HOME/.ssh:/ssh --security-opt label=disable ubi8 ls /ssh\n</code></pre></p>"},{"location":"chapter10/#109-seccomp","title":"10.9 seccomp\u306b\u3088\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5206\u96e2","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 10.9\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sed '/mkdir/d' /usr/share/containers/seccomp.json &gt; /tmp/seccomp.json\n$ diff /usr/share/containers/seccomp.json /tmp/seccomp.json\n$ podman run --rm --security-opt seccomp=/tmp/seccomp.json ubi8 mkdir /foo\n$ podman run --rm ubi8 mkdir /foo\n</code></pre></p>"},{"location":"chapter11/","title":"Chapter 11 \u305d\u306e\u4ed6\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u8003\u616e\u4e8b\u9805","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e0a\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:30\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter11/#111-forkexec","title":"11.1 \u30c7\u30fc\u30e2\u30f3\u3068fork/exec\u30e2\u30c7\u30eb\u3068\u306e\u6bd4\u8f03","text":""},{"location":"chapter11/#dockersock","title":"docker.sock\u3078\u306e\u30a2\u30af\u30bb\u30b9","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code># ls -l /run/docker.sock\n</code></pre></p> <p>Original <pre><code>$ docker run registry.access.redhat.com/ubi8-micro echo hi\n</code></pre></p> <p>Original <pre><code>$ docker run -ti --name hack -v /:/host --privileged registry.access.redhat.com/ubi8-micro chroot /host\n# cat /etc/shadow\n$ docker rm hack\n</code></pre></p>"},{"location":"chapter11/#_1","title":"\u76e3\u67fb\u3068\u30ed\u30ae\u30f3\u30b0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ cat /proc/self/loginuid\n$ sudo cat /proc/self/loginuid\n</code></pre></p> <p>Original <pre><code>$ podman run -d ubi8-micro sleep 20\n$ podman inspect -l --format '{{ .State.Pid }}'\n$ cat /proc/119394/loginuid\n</code></pre></p> <p>Original <pre><code>$ docker run -d registry.access.redhat.com/ubi8-micro sleep 20\n$ docker inspect df2302cf8c6 --format '{{ .State.Pid }}'\n$ cat /proc/120022/loginuid\n</code></pre></p> <p>Original <pre><code># auditctl -w /etc/passwd -p wa -k passwd\n# docker run --privileged -v /:/host registry.access.redhat.com/ubi8-micro:latest touch /host/etc/passwd\n</code></pre></p> <p>Original <pre><code># podman run --privileged -v /:/host registry.access.redhat.com/ubi8-micro:latest touch /host/etc/passwd\n# ausearch -k passwd -i\n</code></pre></p>"},{"location":"chapter11/#112-podman","title":"11.2 Podman\u306b\u3088\u308b\u6a5f\u5bc6\u60c5\u5831\u306e\u53d6\u308a\u6271\u3044","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ echo \"This is my secret\" &gt; /tmp/secret\n$ podman secret create my_secret /tmp/secret\n$ podman run --rm --secret my_secret ubi8 cat /run/secrets/my_secret\n$ podman run --secret my_secret,type=env --name secret_ctr ubi8 bash -c 'echo $my_secret'\n</code></pre></p> <p>Original <pre><code>$ podman commit secret_ctr secret_img\n$ podman image inspect secret_img --format '{{ .Config.Env }}'\n</code></pre></p>"},{"location":"chapter11/#113-podman","title":"11.3 Podman\u306b\u3088\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u4fe1\u983c","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sudo cp /etc/containers/policy.json /tmp\n$ sudo podman image trust set -t reject docker.io\n$ podman pull alpine\n$ sudo podman image trust set -t accept docker.io/library\n$ podman pull alpine\n$ podman pull bitnami/nginx\n</code></pre></p> <p>Original <pre><code>$ cat /etc/containers/policy.json\n</code></pre></p> <p>Original <pre><code>$ podman image trust show\n</code></pre></p> <p>Original <pre><code>$ sudo podman image trust set --type=reject default\n$ podman image trust show\n$ sudo cp /tmp/policy.json /etc/containers/policy.json\n</code></pre></p>"},{"location":"chapter11/#podman","title":"Podman\u306b\u3088\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u7f72\u540d","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.3.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ gpg --batch --passphrase '' --quick-gen-key dwalsh@redhat.com default default\n$ sudo cp /etc/containers/registries.d/default.yaml /etc/containers/policy.json /tmp\n</code></pre></p> <p>Original <pre><code>$ sudo podman pull quay.io/rhatdan/myimage\n$ podman login quay.io/rhatdan\n$ sudo -E GNUPGHOME=$HOME/.gnupg \\\npodman push --tls-verify=false --sign-by dwalsh@redhat.com quay.io/rhatdan/myimage\n$ sudo ls /var/lib/containers/sigstore/rhatdan/\n</code></pre></p> <p>Original <pre><code>$ echo \" sigstore: http://localhost:8000\" | sudo tee --append /etc/containers/registries.d/default.yaml\n$ cd /var/lib/containers/sigstore &amp;&amp; python3 -m http.server\n\n$ podman rmi quay.io/rhatdan/myimage\n$ sudo podman image trust set -f /tmp/publickey.gpg quay.io/rhatdan\n$ gpg --output /tmp/publickey.gpg --armor --export dwalsh@redhat.com\n$ podman pull quay.io/rhatdan/myimage\n$ podman pull quay.io/rhatdan/podman\n$ sudo cp /tmp/default.yaml /etc/containers/registries.d/default.yaml\n$ sudo cp /tmp/policy.json /etc/containers/policy.json\n</code></pre></p>"},{"location":"chapter11/#114-podman","title":"11.4 Podman\u306b\u3088\u308b\u30a4\u30e1\u30fc\u30b8\u30b9\u30ad\u30e3\u30f3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman image mount ubi8\n$ podman unshare\n# podman image mount\n# mnt=$(podman image mount ubi8)\n# echo $mnt\n# cd $mnt\n# /usr/bin/find . -user root -perm -4000\n</code></pre></p>"},{"location":"chapter11/#_2","title":"\u8aad\u307f\u53d6\u308a\u5c02\u7528\u30b3\u30f3\u30c6\u30ca","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 11.4.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --read-only ubi8 touch /foo\n$ podman run --read-only ubi8 touch /run/foo\n$ podman run --read-only-tmpfs=false --read-only ubi8 touch /run/foo\n</code></pre></p>"},{"location":"chapter2/","title":"Chapter 2\u3000\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3","text":"<ul> <li>\u30ec\u30d9\u30eb:\u521d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:40\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4\u6982\u8981<ul> <li>\u30b3\u30f3\u30c6\u30ca\u306e\u64cd\u4f5c</li> <li>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u64cd\u4f5c</li> <li>\u30a4\u30e1\u30fc\u30b8\u306e\u69cb\u7bc9</li> </ul> </li> </ul>"},{"location":"chapter2/#_1","title":"\u4e8b\u524d\u4f5c\u696d","text":"\u4e00\u822c\u30e6\u30fc\u30b6\u30fc(\u30e6\u30fc\u30b6\u30fc\u540d rhel)\u306b\u30b9\u30a4\u30c3\u30c1\u3059\u308b<pre><code># su - rhel\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>su - rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># su - rhel\n$\n</code></pre>"},{"location":"chapter2/#21","title":"2.1 \u30b3\u30f3\u30c6\u30ca\u306e\u64cd\u4f5c","text":""},{"location":"chapter2/#_2","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u63a2\u7d22","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001<code>ubi8/httpd-24</code> \u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059 <pre><code>$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\nTrying to pull registry.access.redhat.com/ubi8/httpd-24:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob 9ece777c9660 done  \nCopying blob 70de3d8fc2c6 done  \nCopying blob b653248f5bcb done  \nCopying config c4127096ce done  \nWriting manifest to image destination\nStoring signatures\nbash-4.4$ \n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u3067OS\u306e\u60c5\u5831\u3092\u53c2\u7167\u3057\u307e\u3059 <pre><code>bash-4.4$ grep PRETTY_NAME /etc/os-release\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>grep PRETTY_NAME /etc/os-release\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>bash-4.4$ grep PRETTY_NAME /etc/os-release\nPRETTY_NAME=\"Red Hat Enterprise Linux 8.8 (Ootpa)\"\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>/usr/bin</code> \u306e\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3044\u307e\u3059 <pre><code>bash-4.4$ ls /usr/bin/ | wc -l\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls /usr/bin/ | wc -l\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>bash-4.4$ ls /usr/bin/ | wc -l\n526\n</code></pre> <p>\u30db\u30b9\u30c8OS\u4e0a\u3067\u540c\u3058\u3088\u3046\u306b\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002<code>exit</code>\u3067\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30db\u30b9\u30c8OS\u306b\u623b\u308a\u3001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>bash-4.4$ exit\n$ grep PRETTY_NAME /etc/os-release\n$ ls /usr/bin/ | wc -l\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>exit\n</code></pre></p> <pre><code>grep PRETTY_NAME /etc/os-release\n</code></pre> <pre><code>ls /usr/bin/ | wc -l\n</code></pre> \u51fa\u529b\u7d50\u679c <p>Info</p> <p>\u30e9\u30dc\u74b0\u5883\u4ee5\u5916\u3067\u306f\u30db\u30b9\u30c8OS\u306e\u72b6\u614b\u306b\u3088\u308a\u51fa\u529b\u3055\u308c\u308b\u6570\u5b57\u306f\u7570\u306a\u308a\u307e\u3059</p> <pre><code>bash-4.4$ exit\nexit\n$ grep PRETTY_NAME /etc/os-release\nPRETTY_NAME=\"Red Hat Enterprise Linux 9.2 (Plow)\"\n$ ls /usr/bin/ | wc -l\n1022\n</code></pre>"},{"location":"chapter2/#_3","title":"\u30b3\u30f3\u30c6\u30ca\u5316\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>\u30c7\u30bf\u30c3\u30c1\u30e2\u30fc\u30c9</code>\u3001\u30dd\u30fc\u30c8 <code>8080</code>\u3001\u540d\u524d <code>myapp</code>\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5 <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> \u51fa\u529b\u7d50\u679c <p>Info</p> <p>\u51fa\u529b\u3055\u308c\u308b\u82f1\u6570\u5b57\u306f\u30b3\u30f3\u30c6\u30caID\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u6bce\u306b\u4e00\u610f\u306e\u3082\u306e\u304c\u51fa\u529b\u3055\u308c\u307e\u3059</p> <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\ne5558cfdda7d1c2c49c4d5ae59bbfcece64cb219b848ba78ae6cbba787ee8d07\n</code></pre> <p><code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u306e\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ podman port myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman port myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman port myapp\n8080/tcp -&gt; 0.0.0.0:8080\n</code></pre> <p><code>\u30c7\u30bf\u30c3\u30c1\u30e2\u30fc\u30c9</code>\u3001\u30dd\u30fc\u30c8 <code>8081</code>\u3001\u540d\u524d <code>myapp1</code>\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5 <pre><code>$ podman run -d -p 8081:8080 --name myapp1 registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -p 8081:8080 --name myapp1 registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -p 8081:8080 --name myapp1 registry.access.redhat.com/ubi8/httpd-24\nf6218c8fd423b6ed913fee1d8d612972e3fc4d0cf737a44e058f0fff0f68aeeb\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p>\u30b3\u30f3\u30c6\u30ca\u306e\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u8d77\u52d5\u4e2d\u306e\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u30dd\u30fc\u30c8\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046 <pre><code>$ podman port --all \n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman port --all </code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman port --all \ne5558cfdda7d    8080/tcp -&gt; 0.0.0.0:8080\nf6218c8fd423    8080/tcp -&gt; 0.0.0.0:8081\n</code></pre> <p><code>podman port</code>\u306e\u51fa\u529b\u5185\u5bb9\u306f\u3001<code>\u30b3\u30f3\u30c6\u30caID</code>\u3001<code>\u30b3\u30f3\u30c6\u30ca\u81ea\u8eab\u306e\u30dd\u30fc\u30c8\u756a\u53f7</code>/<code>\u30d7\u30ed\u30c8\u30b3\u30eb</code>\u3001<code>\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9</code>:<code>\u30db\u30b9\u30c8\u4e0a\u306e\u30dd\u30fc\u30c8\u756a\u53f7</code>\u3001\u306e\u9806\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"chapter2/#_4","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059 <pre><code>$ podman stop myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman stop myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman stop myapp\nmyapp\n</code></pre> <p><code>myapp1</code>\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059 <pre><code>$ podman stop -t 0 myapp1\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman stop -t 0 myapp1\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman stop -t 0 myapp1\nmyapp1\n</code></pre>"},{"location":"chapter2/#_5","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u518d\u5ea6\u8d77\u52d5\u3057\u307e\u3059\u3002<code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>$ podman start myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman start myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman start myapp\nmyapp\n</code></pre>"},{"location":"chapter2/#_6","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u30ea\u30b9\u30c8\u8868\u793a","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ podman ps\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps\nCONTAINER ID  IMAGE                                            COMMAND               CREATED        STATUS         PORTS                   NAMES\ne5558cfdda7d  registry.access.redhat.com/ubi8/httpd-24:latest  /usr/bin/run-http...  9 minutes ago  Up 23 seconds  0.0.0.0:8080-&gt;8080/tcp  myapp\n</code></pre> <p>\u505c\u6b62\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u542b\u3081\u3001\u3059\u3079\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman ps --all\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps --all\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps --all\nCONTAINER ID  IMAGE                                            COMMAND               CREATED         STATUS                      PORTS                   NAMES\ne5558cfdda7d  registry.access.redhat.com/ubi8/httpd-24:latest  /usr/bin/run-http...  10 minutes ago  Up About a minute           0.0.0.0:8080-&gt;8080/tcp  myapp\nf6218c8fd423  registry.access.redhat.com/ubi8/httpd-24:latest  /usr/bin/run-http...  5 minutes ago   Exited (137) 2 minutes ago  0.0.0.0:8081-&gt;8080/tcp  myapp1\n</code></pre>"},{"location":"chapter2/#_7","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u8abf\u67fb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman inspect</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8abf\u67fb\u3057\u307e\u3059\u3002 <code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u307e\u3059\u3002 <pre><code>$ podman inspect myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman inspect myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman inspect myapp\n[\n     {\n          \"Id\": \"e5558cfdda7d1c2c49c4d5ae59bbfcece64cb219b848ba78ae6cbba787ee8d07\",\n          \"Created\": \"2023-09-03T19:58:13.302930658Z\",\n          \"Path\": \"container-entrypoint\",\n          \"Args\": [\n               \"/usr/bin/run-httpd\"\n          ],\n...\n]\n</code></pre>"},{"location":"chapter2/#_8","title":"\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.7\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman rm</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u307e\u3059\u3002 <code>myapp1</code>\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ podman rm myapp1\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman rm myapp1\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman rm myapp1\nmyapp1\n</code></pre>"},{"location":"chapter2/#_9","title":"\u30b3\u30f3\u30c6\u30ca\u3078\u306e\u5b9f\u884c","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.8\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman exec</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u65b0\u305f\u306b\u30d7\u30ed\u30bb\u30b9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001<code>--interactive (-i)</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002 <code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u5185\u306bhtml\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman exec -i myapp bash -c 'cat &gt; /var/www/html/index.html' &lt;&lt; _EOF\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;/head&gt;\n        &lt;body&gt;\n            &lt;h1&gt;Hello World&lt;/h1&gt;\n        &lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman exec -i myapp bash -c 'cat &gt; /var/www/html/index.html' &lt;&lt; _EOF\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Hello World&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d <pre><code>$ podman exec myapp cat /var/www/html/index.html\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman exec myapp cat /var/www/html/index.html\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman exec myapp cat /var/www/html/index.html\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;/head&gt;\n        &lt;body&gt;\n            &lt;h1&gt;Hello World&lt;/h1&gt;\n        &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"chapter2/#_10","title":"\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.1.9\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059 <pre><code>$ podman stop myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman stop myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman stop myapp\nmyapp\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u3092\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u8d77\u52d5\u4e2d\u306e<code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u304b\u3089<code>myimage</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 <pre><code>$ podman commit myapp myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman commit myapp myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman commit myapp myimage\nGetting image source signatures\nCopying blob 48bbc3bb7b39 skipped: already exists  \nCopying blob ca07266b6575 skipped: already exists  \nCopying blob 2860cc774137 skipped: already exists  \nCopying blob 195affa04e51 done  \nCopying config 7af708ab2c done  \nWriting manifest to image destination\nStoring signatures\n7af708ab2cb1b896b2e6a946588a8607b1d02e1c4e7a0ac317fe6f205901e3c8\n</code></pre> <p><code>myimage</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u304b\u3089<code>myapp1</code>\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059 <pre><code>$ podman run -d --name myapp1 -p 8080:8080 myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d --name myapp1 -p 8080:8080 myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>podman run -d --name myapp1 -p 8080:8080 myimage\n41862b662bdeb01bd6c2a2dac2e8b1d337a275d28fce720ad4a738650ee3112f\n</code></pre>"},{"location":"chapter2/#22","title":"2.2 \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u64cd\u4f5c","text":""},{"location":"chapter2/#_11","title":"\u30b3\u30f3\u30c6\u30ca\u3068\u30a4\u30e1\u30fc\u30b8\u306e\u9055\u3044","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman image tree</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059 <pre><code>$ podman image tree myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image tree myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>podman image tree myimage\nImage ID: 7af708ab2cb1\nTags:     [localhost/myimage:latest]\nSize:     453.8MB\nImage Layers\n\u251c\u2500\u2500 ID: 48bbc3bb7b39 Size: 214.8MB\n\u251c\u2500\u2500 ID: c85189e46544 Size: 59.34MB\n\u251c\u2500\u2500 ID: 129ebf0074a0 Size: 179.5MB Top Layer of: [registry.access.redhat.com/ubi8/httpd-24:latest]\n\u2514\u2500\u2500 ID: eb3ca38cae75 Size:  51.2kB Top Layer of: [localhost/myimage:latest]\n</code></pre> <p>2\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002 <code>myimage</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3068\u5143\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8(<code>ubi8/httpd-24</code>)\u3068\u306e\u5dee\u5206\u3092\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman image diff myimage ubi8/httpd-24\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image diff myimage ubi8/httpd-24\n</code></pre></p> \u51fa\u529b\u7d50\u679c <p>\u5b9f\u969b\u306b\u306f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u3054\u3068\u306b\u51fa\u529b\u9806\u304c\u5909\u5316\u3057\u307e\u3059</p> <pre><code>$ podman image diff myimage ubi8/httpd-24\nC /opt\nC /opt/app-root\nC /opt/app-root/etc\nA /opt/app-root/etc/passwd\nC /etc\nC /etc/httpd\nC /etc/httpd/conf.d\nC /etc/httpd/conf.d/ssl.conf\nC /etc/httpd/conf\nC /etc/httpd/conf/httpd.conf\nC /etc/httpd/tls\nA /etc/httpd/tls/dhparams.pem\nA /etc/httpd/tls/localhost.crt\nA /etc/httpd/tls/localhost.key\nC /etc/group\nC /var\nC /var/www\nC /var/www/html\nA /var/www/html/index.html\nC /var/log\nC /var/log/httpd\nA /var/log/httpd/modsec_audit.log\nA /var/log/httpd/modsec_debug.log\n</code></pre>"},{"location":"chapter2/#_12","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u8868\u793a","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u30a4\u30e1\u30fc\u30b8\u3092\u30ea\u30b9\u30c8\u8868\u793a <pre><code>$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED        SIZE\nlocalhost/myimage                         latest      7af708ab2cb1  6 minutes ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago    454 MB\n</code></pre>"},{"location":"chapter2/#_13","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u8abf\u67fb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman image inspect</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u8a73\u7d30\u306b\u8abf\u3079\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <code>myimage</code>\u306e\u8abf\u67fb\u3092\u884c\u3044\u307e\u3059\u3002 <pre><code>$ podman image inspect myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image inspect myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman image inspect myimage\n[\n     {\n          \"Id\": \"7af708ab2cb1b896b2e6a946588a8607b1d02e1c4e7a0ac317fe6f205901e3c8\",\n          \"Digest\": \"sha256:2366a37f18bd462b09826a897f78fd3a523b57ba8d4330956dd0f2b0b7befe9a\",\n          \"RepoTags\": [\n               \"localhost/myimage:latest\"\n          ],\n          \"RepoDigests\": [\n               \"localhost/myimage@sha256:2366a37f18bd462b09826a897f78fd3a523b57ba8d4330956dd0f2b0b7befe9a\"\n          ],\n...\n]\n</code></pre> <p>\u51fa\u529b\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u3001\u7279\u5b9a\u306e\u60c5\u5831\u3060\u3051\u3092\u51fa\u529b\u3067\u304d\u307e\u3059\u3002 <code>CMD</code>\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 <pre><code>$ podman image inspect --format '{{ .Config.Cmd }}' myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image inspect --format '{{ .Config.Cmd }}' myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman image inspect --format '{{ .Config.Cmd }}' myimage\n[/usr/bin/run-httpd]\n</code></pre> <p><code>StopSignal</code>\u3092\u51fa\u529b\u3057\u307e\u3059 <pre><code>$ podman image inspect --format '{{ .Config.StopSignal }}' myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image inspect --format '{{ .Config.StopSignal }}' myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman image inspect --format '{{ .Config.StopSignal }}' myimage\n</code></pre>"},{"location":"chapter2/#_14","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30c3\u30b7\u30e5","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u30b3\u30f3\u30c6\u30ca\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\uff08\u5358\u306b\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u3068\u3082\u547c\u3076\uff09 <code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u6642\u3001\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ podman run docker://registry.access.redhat.com/ubi8/httpd-24:latest echo hello\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run docker://registry.access.redhat.com/ubi8/httpd-24:latest echo hello\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run docker://registry.access.redhat.com/ubi8/httpd-24:latest echo hello\nhello\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b9\u30dd\u30fc\u30c8\u3092\u7701\u7565\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f<code>docker://</code> <pre><code>$ podman run registry.access.redhat.com/ubi8/httpd-24:latest echo hello\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run registry.access.redhat.com/ubi8/httpd-24:latest echo hello\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run registry.access.redhat.com/ubi8/httpd-24:latest echo hello\nhello\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u3092\u51fa\u529b\u3057\u307e\u3059 <pre><code>$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c* <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED      SIZE\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago  454 MB\n</code></pre> <p><code>myimage</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059 <pre><code>$ podman push myimage quay.io/rhatdan/myimage\n</code></pre></p>"},{"location":"chapter2/#podman-login","title":"podman login\uff1a\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3078\u306e\u30ed\u30b0\u30a4\u30f3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>quay.io\u3068\u306f</p> <p>quay.io\u306f\u3001 \u4ee5\u964d\u306equay.io\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3084\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306epush\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3054\u81ea\u8eab\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u304c\u5fc5\u8981\u3067\u3059\u3002 Red Hat\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u5834\u5408\u306f\u305d\u308c\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002</p> <p><code>quay.io</code>\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059 <pre><code>$ podman login quay.io\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman login quay.io\n</code></pre></p> \u51fa\u529b\u7d50\u679c* <pre><code>$ podman login quay.io\nUsername: tnk4on\nPassword: \nLogin Succeeded!\n</code></pre> <p>\u30ed\u30fc\u30ab\u30eb\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u8a8d\u8a3c\u60c5\u5831\u306e\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u8a18</p> <p>\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u305f\u60c5\u5831\u306f\u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u53d6\u308a\u6271\u3044\u306b\u306f\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002</p> <pre><code>$ cat /run/user/$UID/containers/auth.json\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat /run/user/$UID/containers/auth.json\n</code></pre></p> \u51fa\u529b\u7d50\u679c* <pre><code>$ cat /run/user/$UID/containers/auth.json\n{\n        \"auths\": {\n                \"quay.io\": {\n                        \"auth\": \"xxxxxxxxxxxxxxxx\"\n                }\n        }\n}\n</code></pre> <p><code>quay.io</code>\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059 <pre><code>$ podman logout quay.io\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>$ podman logout quay.io\n</code></pre></p> \u51fa\u529b\u7d50\u679c* <pre><code>$ podman logout quay.io\nRemoved login credentials for quay.io\n</code></pre>"},{"location":"chapter2/#_15","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30bf\u30b0\u4ed8\u3051","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED      SIZE\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago  454 MB\n</code></pre> <p><code>podman tag</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306b\u65b0\u3057\u3044\u540d\u524d\uff08\u30bf\u30b0\uff09\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002 \u30ec\u30b8\u30b9\u30c8\u30ea(<code>quay.io</code>)\u3001\u30e6\u30fc\u30b6\u30fc\u540d(<code>rhatdan</code>)\u3092\u4ed8\u52a0\u3057\u305f\u65b0\u3057\u3044\u30bf\u30b0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 <pre><code>$ podman tag myimage quay.io/rhatdan/myimage\n$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman tag myimage quay.io/rhatdan/myimage\n</code></pre> <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman tag myimage quay.io/rhatdan/myimage\n$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED         SIZE\nlocalhost/myimage                         latest      c3c487bbbf7b  37 seconds ago  454 MB\nquay.io/rhatdan/myimage                   latest      c3c487bbbf7b  37 seconds ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago     454 MB\n</code></pre> <p><code>quay.io</code>\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u6307\u5b9a\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059* <pre><code>$ podman login --username rhatdan quay.io\n</code></pre></p> <p><code>quay.io</code>\u306b\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30c3\u30b7\u30e5\u3057\u307e\u3059 <pre><code>$ podman push quay.io/rhatdan/myimage\n</code></pre></p> <p><code>podman tag</code>\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u305f\u30bf\u30b0\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman tag quay.io/rhatdan/myimage quay.io/rhatdan/myimage:1.0\n$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>$ podman tag quay.io/rhatdan/myimage quay.io/rhatdan/myimage:1.0\n</code></pre> <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED        SIZE\nlocalhost/myimage                         latest      c3c487bbbf7b  9 minutes ago  454 MB\nquay.io/rhatdan/myimage                   latest      c3c487bbbf7b  9 minutes ago  454 MB\nquay.io/rhatdan/myimage                   1.0         c3c487bbbf7b  9 minutes ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago    454 MB\n</code></pre>"},{"location":"chapter2/#_16","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u524a\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.7\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u4ee5\u524d\u306b<code>podman commit myapp myimage</code>\u3067\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f<code>localhost/myimage</code>\u3068\u3044\u3046\u540d\u524d\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p><code>localhost/myimage</code>\u30bf\u30b0\u3092\u524a\u9664\u3057\u307e\u3059 <pre><code>$ podman images\n$ podman rmi localhost/myimage\n$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman images\n</code></pre> <pre><code>podman rmi localhost/myimage\n</code></pre> <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED         SIZE\nlocalhost/myimage                         latest      c3c487bbbf7b  10 minutes ago  454 MB\nquay.io/rhatdan/myimage                   latest      c3c487bbbf7b  10 minutes ago  454 MB\nquay.io/rhatdan/myimage                   1.0         c3c487bbbf7b  10 minutes ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago     454 MB\n$ podman rmi localhost/myimage\nUntagged: localhost/myimage:latest\n$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED         SIZE\nquay.io/rhatdan/myimage                   latest      c3c487bbbf7b  10 minutes ago  454 MB\nquay.io/rhatdan/myimage                   1.0         c3c487bbbf7b  10 minutes ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago     454 MB\n</code></pre> <p><code>myimage</code>\u304a\u3088\u3073<code>myimage:1.0</code>\u3092\u524a\u9664\u3057\u307e\u3059</p> <p>\u8a33\u6ce8</p> <p>1\u7ae0\u3067\u5b9f\u884c\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001myimage\u306e\u524a\u9664\u524d\u306b\u505c\u6b62\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 <pre><code>podman rm -f -t 0 myapp1\n</code></pre></p> <pre><code>$ podman rmi myimage\n$ podman rmi myimage:1.0\n$ podman images\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>$ podman rmi myimage\n</code></pre> <pre><code>$ podman rmi myimage:1.0\n</code></pre> <pre><code>$ podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman rmi myimage\nUntagged: quay.io/rhatdan/myimage:latest\n$ podman rmi myimage:1.0\nUntagged: quay.io/rhatdan/myimage:1.0\nDeleted: c3c487bbbf7ba989432ae65facfac36ca34fbd75fde664b24cf6247bf844f955\n$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED      SIZE\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago  454 MB\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u5225\u306e\u65b9\u6cd5</p> <p>ID\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <pre><code>$ podman rmi edc479f58484\n$ podman rmi edc479f58484 --force\n</code></pre> <p><code>podman image prune -a</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u4ee5\u5916\u3092\u5168\u3066\u524a\u9664\u3067\u304d\u307e\u3059\u3002 \u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u5168\u3066\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ podman image prune -a\n$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman image prune -a\n</code></pre> <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman image prune -a\nWARNING! This command removes all images without at least one container associated with them.\nAre you sure you want to continue? [y/N] y\n$ podman images\n</code></pre>"},{"location":"chapter2/#_17","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30eb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.8\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>quay.io</code>\u304b\u3089<code>myimage</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3059\u308b <pre><code>$ podman pull quay.io/rhatdan/myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pull quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pull quay.io/rhatdan/myimage\nTrying to pull quay.io/rhatdan/myimage:latest...\nGetting image source signatures\nCopying blob e3460238f8a1 done  \nCopying blob c7765172d3ce done  \nCopying blob dfd8c625d022 done  \nCopying blob 2b782a9ad894 done  \nCopying blob a1eadb69adf1 done  \nCopying config 2c7e43d880 done  \nWriting manifest to image destination\nStoring signatures\n2c7e43d880382561ebae3fa06c7a1442d0da2912786d09ea9baaef87f73c29ae\n</code></pre> <p>Original <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\nTrying to pull registry.access.redhat.com/ubi8/httpd-24:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob 9ece777c9660 done  \nCopying blob 70de3d8fc2c6 done  \nCopying blob b653248f5bcb done  \nCopying config c4127096ce done  \nWriting manifest to image destination\nStoring signatures\na68b01256feb009ba382174831f67a8f78af61024abe809c50d1ce6ae6f84131\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED      SIZE\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago  454 MB\nquay.io/rhatdan/myimage                   latest      2c7e43d88038  2 years ago  462 MB\n</code></pre> <p>Docker\u306fdocker.io\u3092\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9 Podman\u3067\u306f\u8907\u6570\u306e\u30ec\u30b8\u30b9\u30c8\u30ea\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u306b\u3088\u308a\u7570\u306a\u308b\u3002</p> <p>Podman\u306e\u60c5\u5831\u3092\u51fa\u529b <pre><code>$ podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info\n...\nregistries:\n  search:\n  - registry.access.redhat.com\n  - registry.redhat.io\n  - docker.io\n...\n</code></pre> <p><code>podman create</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3059\u3050\u306b\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002 \u505c\u6b62\u72b6\u614b\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u306b\u306f<code>podman start</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>\u77ed\u7e2e\u540d\u3067\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman create -p 8080:8080 ubi8/httpd-24\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman create -p 8080:8080 ubi8/httpd-24\n</code></pre></p> <p>\u6ce8\u8a18</p> <p>RHEL\u306e\u5834\u5408* <pre><code>$ podman create -p 8080:8080 ubi8/httpd-24\nResolved \"ubi8/httpd-24\" as an alias (/etc/containers/registries.conf.d/001-rhel-shortnames.conf)\nTrying to pull registry.access.redhat.com/ubi8/httpd-24:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob 9ece777c9660 done  \nCopying blob 70de3d8fc2c6 done  \nCopying blob b653248f5bcb done  \nCopying config c4127096ce done  \nWriting manifest to image destination\nStoring signatures\n94ad6a37b8fb40b13eb7038e5e174cc22bdd3fe8237a6fbd6a14bd87896528f8\n</code></pre> - <code>\"ubi8\" = \"registry.access.redhat.com/ubi8\"</code> \u304c\u3042\u308b\u305f\u3081\u89e3\u6c7a\u3057\u3066\u3057\u307e\u3046</p> <p>\u77ed\u7e2e\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b <pre><code>$ cat /etc/containers/registries.conf.d/000-shortnames.conf\n</code></pre> \u51fa\u529b\u7d50\u679c <pre><code>$ cat /etc/containers/registries.conf.d/000-shortnames.conf\n[aliases]\n...\n  # centos\n  \"centos\" = \"quay.io/centos/centos\"\n  # containers\n  \"skopeo\" = \"quay.io/skopeo/stable\"\n  \"buildah\" = \"quay.io/buildah/stable\"\n  \"podman\" = \"quay.io/podman/stable\"\n...\n</code></pre></p>"},{"location":"chapter2/#_18","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u691c\u7d22","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.9\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u30ea\u30dd\u30b8\u30c8\u30earegistry.access.redhat.com\u3067\u3001\u540d\u524d\u306bhttpd\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u542b\u3080\u30a4\u30e1\u30fc\u30b8\u3092\u691c\u7d22\u3057\u307e\u3059 <pre><code>$ podman search registry.access.redhat.com/httpd\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman search registry.access.redhat.com/httpd\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman search registry.access.redhat.com/httpd\nNAME                                                                         DESCRIPTION\nregistry.access.redhat.com/rhscl/httpd-24-rhel7                              Apache HTTP 2.4 Server\nregistry.access.redhat.com/ubi8/httpd-24                                     Platform for running Apache httpd 2.4 or bui...\nregistry.access.redhat.com/ubi9/httpd-24                                     rhcc_registry.access.redhat.com_ubi9/httpd-2...\nregistry.access.redhat.com/cloudforms46-beta/cfme-openshift-httpd            CloudForms is a management and automation pl...\nregistry.access.redhat.com/cloudforms46/cfme-openshift-httpd                 Web Server image for a multi-pod Red Hat\u00ae C...\n...\n</code></pre>"},{"location":"chapter2/#_19","title":"\u30a4\u30e1\u30fc\u30b8\u306e\u30de\u30a6\u30f3\u30c8","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.2.10\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman mount</code>\u3092\u5b9f\u884c\u3059\u308b\u3002\u305d\u306e\u307e\u307e\u3067\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002 <pre><code>$ podman mount quay.io/rhatdan/myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman mount quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman mount quay.io/rhatdan/myimage\nError: cannot run command \"podman mount\" in rootless mode, must execute `podman unshare` first\n</code></pre> <p><code>podman unshare</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08\u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30e1\u30fc\u30b8\u304c\u7121\u3044\u5834\u5408\u306f<code>podman pull quay.io/rhatdan/myimage</code>\u3092\u4e8b\u524d\u306b\u5b9f\u884c\u3057\u307e\u3059\uff09 <code>podman unsahre</code>\u3092\u5b9f\u884c\u3059\u308b\u3068\u30d7\u30ed\u30f3\u30d7\u30c8\u304c<code>$</code>\u304b\u3089<code>#</code>\u306b\u5909\u5316\u3057\u307e\u3059\u3002 <pre><code>$ podman unshare\n# mnt=$(podman image mount quay.io/rhatdan/myimage)\n# cat $mnt/var/www/html/index.html\n# podman image unmount quay.io/rhatdan/myimage\n# exit\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare\n</code></pre> <pre><code>mnt=$(podman image mount quay.io/rhatdan/myimage)\n</code></pre> <pre><code>cat $mnt/var/www/html/index.html\n</code></pre> <pre><code>podman image unmount quay.io/rhatdan/myimage\n</code></pre> <pre><code>exit\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare\n# mnt=$(podman image mount quay.io/rhatdan/myimage)\n# cat $mnt/var/www/html/index.html\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n   &lt;h1&gt;Hello World&lt;h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n# podman image unmount quay.io/rhatdan/myimage\n2c7e43d880382561ebae3fa06c7a1442d0da2912786d09ea9baaef87f73c29ae\n# exit\nexit\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09<code>podman image</code>\u30b3\u30de\u30f3\u30c9\u306e\u4ed6\u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man podman-image\n</code></pre> <p>\u307e\u3068\u3081\uff082.2 \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u64cd\u4f5c\uff09</p> <p>\u30b3\u30f3\u30c6\u30ca\u5b9f\u884c\u306e\u5143\u3068\u306a\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u304b\u3089\u5165\u624b\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u540d\u524d\u3084\u30bf\u30b0\u3092\u4ed8\u3051\u305f\u3082\u306e\u3092\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u307e\u3059\u3002 Docker\u306b\u306f\u7121\u3044Podman\u72ec\u81ea\u306e\u30b3\u30de\u30f3\u30c9\u3068\u3057\u3066\u3001<code>podman image mount</code>\u3084<code>podman unshare</code>\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3088\u308a\u5b89\u5168\u306b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u3092\u8abf\u67fb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"chapter2/#23","title":"2.3\u3000\u30a4\u30e1\u30fc\u30b8\u306e\u69cb\u7bc9","text":""},{"location":"chapter2/#_20","title":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30eb\u30c9\u306e\u81ea\u52d5\u5316","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 2.3.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>myapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306bindex.html\u3068Containerfile\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ mkdir myapp\n$ cat &gt; myapp/index.html &lt;&lt; _EOF\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n &lt;h1&gt;Hello World&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n_EOF\n$ cat &gt; myapp/Containerfile &lt;&lt; _EOF\nFROM ubi8/httpd-24\nCOPY index.html /var/www/html/index.html\n_EOF\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c <pre><code>$ mkdir myapp\n$ cat &gt; myapp/index.html &lt;&lt; _EOF\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n &lt;h1&gt;Hello World&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n_EOF\n$ cat &gt; myapp/Containerfile &lt;&lt; _EOF\nFROM ubi8/httpd-24\nCOPY index.html /var/www/html/index.html\n_EOF\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059 <pre><code>$ podman build -t quay.io/rhatdan/myimage ./myapp\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman build -t quay.io/rhatdan/myimage ./myapp\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman build -t quay.io/rhatdan/myimage ./myapp\nSTEP 1/2: FROM ubi8/httpd-24\nSTEP 2/2: COPY index.html /var/www/html/index.html\nCOMMIT quay.io/rhatdan/myimage\n--&gt; 1992ba61ae6\nSuccessfully tagged quay.io/rhatdan/myimage:latest\n1992ba61ae60d779d865e7de510601d52184f12b25187f6b8c02318ccc240f6b\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u3001\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059</p> <p>\u3053\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u30d3\u30eb\u30c9\u3068\u30d7\u30c3\u30b7\u30e5\u3092\u7c21\u5358\u306b\u81ea\u52d5\u5316\u3059\u308b\u305f\u3081\u306e\u4e00\u4f8b\u3067\u3059\u3002</p> <p>\u3053\u3053\u3067\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u306f\u884c\u3044\u307e\u305b\u3093\u304c\u3001\u8a66\u3057\u3066\u307f\u305f\u3044\u65b9\u306f\u3054\u81ea\u8eab\u306e<code>quay.io</code>\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u610f\u3057\u3066\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002</p> <pre><code>$ cat &gt; myapp/automate.sh &lt;&lt; _EOF\n#!/bin/bash\npodman build -t quay.io/rhatdan/myimage ./myapp\npodman push quay.io/rhatdan/myimage\n_EOF\n$ chmod +x myapp/automate.sh\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat &gt; myapp/automate.sh &lt;&lt; _EOF\n#!/bin/bash\npodman build -t quay.io/rhatdan/myimage ./myapp\npodman push quay.io/rhatdan/myimage\n_EOF\n</code></pre> <pre><code>chmod +x myapp/automate.sh\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>cat &gt; myapp/automate.sh &lt;&lt; _EOF\n#!/bin/bash\npodman build -t quay.io/rhatdan/myimage ./myapp\npodman push quay.io/rhatdan/myimage\n_EOF\n$ chmod +x myapp/automate.sh\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u30ea\u30b9\u30c8\u3092\u51fa\u529b\u3059\u308b <pre><code>$ podman images\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>$ podman images\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman images\nREPOSITORY                                TAG         IMAGE ID      CREATED        SIZE\nquay.io/rhatdan/myimage                   latest      1992ba61ae60  4 minutes ago  454 MB\nregistry.access.redhat.com/ubi8/httpd-24  latest      c4127096ce64  2 weeks ago    454 MB\n&lt;none&gt;                                    &lt;none&gt;      2c7e43d88038  2 years ago    462 MB\n</code></pre>"},{"location":"chapter3/","title":"Chapter 3\u3000\u30dc\u30ea\u30e5\u30fc\u30e0","text":"<ul> <li>\u30ec\u30d9\u30eb:\u521d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:20\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter3/#_1","title":"\u4e8b\u524d\u4f5c\u696d","text":"\u4e00\u822c\u30e6\u30fc\u30b6\u30fc(\u30e6\u30fc\u30b6\u30fc\u540d rhel)\u306b\u30b9\u30a4\u30c3\u30c1\u3059\u308b<pre><code># su - rhel\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>su - rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># su - rhel\n$\n</code></pre>"},{"location":"chapter3/#31","title":"3.1 \u30b3\u30f3\u30c6\u30ca\u3067\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f7f\u7528","text":""},{"location":"chapter3/#_2","title":"\u30b3\u30f3\u30c6\u30ca\u3067\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f7f\u7528","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 3.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e2d\u306bindex.html\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ mkdir html\n$ cat &gt; html/index.html &lt;&lt; _EOF\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;h1&gt;Goodbye World&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>mkdir html\n</code></pre></p> <pre><code>cat &gt; html/index.html &lt;&lt; _EOF\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Goodbye World&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p><code>podman run</code>\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306b<code>-v</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30db\u30b9\u30c8\u4e0a\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>-v ./html:/var/www/html:ro,z</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059</p> <p><code>:ro,z</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p><code>:ro</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u8aad\u307f\u53d6\u308a\u5c02\u7528\u30e2\u30fc\u30c9\u3067\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002 <code>:z</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306fSELinux\u306e\u30e9\u30d9\u30eb\u3092\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u518d\u30e9\u30d9\u30eb\u4ed8\u3051\u3057\u307e\u3059\u3002\u8a73\u7d30\u306f\u672c\u66f83.1.2\u5185\u306e<code>SELinux \u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u30aa\u30d7\u30b7\u30e7\u30f3</code>\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p> <pre><code>$ podman run -d -v ./html:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -v ./html:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -v ./html:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\nTrying to pull quay.io/rhatdan/myimage:latest...\nGetting image source signatures\nCopying blob e3460238f8a1 done  \nCopying blob c7765172d3ce done  \nCopying blob dfd8c625d022 done  \nCopying blob 2b782a9ad894 done  \nCopying blob a1eadb69adf1 done  \nCopying config 2c7e43d880 done  \nWriting manifest to image destination\nStoring signatures\n654cf2e2a6382f901b775296691cdf47231efd7da6c1bdb877f00ef9c4d6a654\n</code></pre> <p><code>curl</code>\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ curl localhost:8080\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>curl localhost:8080\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ curl localhost:8080\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n &lt;h1&gt;Goodbye World&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p><code>podman rm</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\u5f8c\u3082\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u524a\u9664\u3055\u308c\u307e\u305b\u3093\u3002</p> <p><code>--latest</code>\u3001<code>--force</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p><code>podman rm</code>\u30b3\u30de\u30f3\u30c9\u306b\u5408\u308f\u305b\u3066<code>--latest</code>\u3001<code>--force</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\u5c11\u306a\u3044\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5f37\u5236\u7684\u306b\u524a\u9664\u3067\u304d\u307e\u3059\u3002</p> <p><code>--latest</code>\u307e\u305f\u306f<code>-l</code>\u306f\u30b3\u30f3\u30c6\u30ca\u540d\u3084ID\u306e\u4ee3\u308f\u308a\u306b\u6700\u5f8c\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 <code>--force</code>\u307e\u305f\u306f<code>-f</code>\u306f\u5b9f\u884c\u4e2d\u307e\u305f\u306f\u4e00\u6642\u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5f37\u5236\u7684\u306b\u524a\u9664\u3057\u307e\u3059\u3002</p> <pre><code>$ podman rm --latest --force\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman rm --latest --force\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman rm --latest --force\n654cf2e2a6382f901b775296691cdf47231efd7da6c1bdb877f00ef9c4d6a654\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p>html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u3092\u78ba\u8a8d\u3057\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u524a\u9664\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059</p> <pre><code>$ ls -l html\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls -l html\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ ls -l html\n</code></pre> <p>html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u524a\u9664\u3057\u307e\u3059 <pre><code>$ rm -rf html\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>rm -rf html\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p>"},{"location":"chapter3/#_3","title":"\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 3.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Podman\u306e\u30b3\u30f3\u30c6\u30ca\u3067\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3059\u308b\u5225\u306e\u4ed5\u7d44\u307f\u3068\u3057\u3066\u300c\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\uff08\u307e\u305f\u306f\u5358\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u547c\u3076\uff09\u300d\u304c\u3042\u308a\u307e\u3059\u3002 \u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u306f<code>podman volume create</code>\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5b9f\u4f53\u306f\u30db\u30b9\u30c8\u4e0a\u306e\u7279\u5b9a\u306e\u30d1\u30b9\uff08\u30ed\u30fc\u30ab\u30eb\u30b3\u30f3\u30c6\u30ca\u30b9\u30c8\u30ec\u30fc\u30b8\uff09\u306b\u3042\u308a\u307e\u3059\u3002</p> <p><code>podman volume create</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0<code>webdata</code>\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman volume create webdata\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman volume create webdata\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman volume create webdata\nwebdata\n</code></pre> <p>\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ podman volume inspect webdata\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman volume inspect webdata\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman volume inspect webdata\n[\n     {\n          \"Name\": \"webdata\",\n          \"Driver\": \"local\",\n          \"Mountpoint\": \"/home/rhel/.local/share/containers/storage/volumes/webdata/_data\",\n          \"CreatedAt\": \"2023-09-11T15:55:56.024196806Z\",\n          \"Labels\": {},\n          \"Scope\": \"local\",\n          \"Options\": {},\n          \"MountCount\": 0,\n          \"NeedsCopyUp\": true,\n          \"NeedsChown\": true\n     }\n]\n</code></pre> <p>\u30dc\u30ea\u30e5\u30fc\u30e0\u5185\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u30b3\u30f3\u30c6\u30ca\u30b9\u30c8\u30ec\u30fc\u30b8\u4e0a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u30db\u30b9\u30c8\u4e0a\u3067\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u4f5c\u6210\u3059\u308b</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001<code>/home/rhel/.local/share/containers/storage/volumes/webdata/_data/</code>\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u5185\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u4f5c\u6210\u3057\u305f\u3053\u3068\u3068\u540c\u7b49\u306e\u7d50\u679c\u3092\u5f97\u3089\u308c\u307e\u3059\u3002</p> <pre><code>$ cat &gt; /home/rhel/.local/share/containers/storage/volumes/webdata/_data/index.html &lt;&lt; _EOL\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n &lt;h1&gt;Goodbye World&lt;/h1&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n_EOL\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat &gt; /home/rhel/.local/share/containers/storage/volumes/webdata/_data/index.html &lt;&lt; _EOL\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Goodbye World&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOL\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p><code>-v</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30db\u30b9\u30c8\u4e0a\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u306e\u3068\u540c\u69d8\u306b\u3001\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p><code>-v</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0<code>webdata</code>\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman run -d -v webdata:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n</code></pre> (\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -v webdata:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -v webdata:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n8c1c69967f9cef8a0de312f65cb0e70c0be2e6af3965d299aec75e8f39d6e25a\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>curl</code>\u30b3\u30de\u30f3\u30c9\u3084\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u3063\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\uff08<code>Goodbye World</code>\u304c\u8868\u793a\u3055\u308c\u308b\uff09\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046</p> <p><code>podman stop</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4e00\u6642\u505c\u6b62\u3057\u307e\u3059\u3002</p> <p><code>-t 0</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u30b3\u30f3\u30c6\u30caID\u3092\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30caID\u306f\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306e\u3082\u306e\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>-t 0</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p><code>--time</code>\u307e\u305f\u306f<code>-t</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u3001\u5f37\u5236\u7684\u306b\u505c\u6b62\u3059\u308b\u307e\u3067\u306e\u5f85\u6a5f\u6642\u9593\u3092\u79d2\u6570\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002<code>-t 0</code>\u306e\u5834\u5408\u306f\u5373\u5ea7\u306b\u505c\u6b62\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p> <p>\u30b3\u30f3\u30c6\u30caID\u306b\u3064\u3044\u3066</p> <p>\u30b3\u30f3\u30c6\u30caID\u306f\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\u6642\u306b\u30e9\u30f3\u30c0\u30e0\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u308b64\u6587\u5b57\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3067\u3059\u3002\u3053\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306e\u5148\u982d12\u6587\u5b57\u3092\u30b3\u30f3\u30c6\u30caID\u3068\u3057\u3066\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002<code>podman ps</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30caID\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</p> <pre><code>$ podman stop -t 0 8c1c69967f9c\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman stop -t 0 8c1c69967f9c\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman stop -t 0 8c1c69967f9c\n8c1c69967f9c\n</code></pre> <p>\u4f5c\u6210\u3057\u305f\u30dc\u30ea\u30e5\u30fc\u30e0\u306f<code>podman volume rm</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u524a\u9664\u3067\u304d\u307e\u3059\u3002</p> <p><code>--force</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u3092\u6307\u5b9a\u3057\u3066\u5f37\u5236\u7684\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u524a\u9664\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\u3092\u884c\u3044\u307e\u3059\u3002</p> <p><code>--force</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\u306b\u3064\u3044\u3066</p> <p><code>podman volume rm</code>\u306e\u307f\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408\u3001\u4eca\u56de\u306f\u30b3\u30f3\u30c6\u30ca\u304c\u307e\u3060\u505c\u6b62\u72b6\u614b\u3067\u6b8b\u3063\u3066\u3044\u308b\u305f\u3081\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u524a\u9664\u304c\u3067\u304d\u307e\u305b\u3093\u3002 <pre><code>Error: volume webdata is being used by the following container(s): e55377526ab98a9a875c244c9f110b70ed82656f8c3e6d6456181ed63594fbd1: volume is being used\n</code></pre> \u305d\u306e\u305f\u3081\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u30b3\u30f3\u30c6\u30ca\u3092\u540c\u6642\u306b\u5f37\u5236\u7684\u306b\u524a\u9664\u3059\u308b\u305f\u3081\u306b<code>--force</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>$ podman volume rm --force webdata\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman volume rm --force webdata\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman volume rm --force webdata\nwebdata\n</code></pre> <p><code>podman volume list</code>\u3092\u5b9f\u884c\u3057\u3066\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ podman volume list\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman volume list\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman volume list\n$\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>podman ps -a</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046</p> <p>\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u5b58\u5728\u3057\u306a\u3044\u72b6\u614b\u3067<code>podman run</code>\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u5834\u5408\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002</p> <p><code>webdata1</code>\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman run -d -v webdata1:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n$ podman volume list\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -v webdata1:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\n</code></pre> <pre><code>podman volume list\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -v webdata1:/var/www/html:ro,z -p 8080:8080 quay.io/rhatdan/myimage\nb2613ca208811ac992a1215cffb9a20b5eb97e0d5cb543aacfe6616fc5bb6e49\n$ podman volume list\nDRIVER      VOLUME NAME\nlocal       webdata1\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>curl</code>\u30b3\u30de\u30f3\u30c9\u3084\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30f3\u30c4\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305f\u305d\u306e\u969b\u306b\u8868\u793a\u3055\u308c\u308b\u5185\u5bb9\u306b\u3064\u3044\u3066\u3082\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u7a7a\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u305f\u969b\u306e\u6319\u52d5</p> <p><code>webdata1</code>\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u7a7a\u306a\u306e\u3067\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u5185\u306e\u5143\u306eindex.html\u306f\u4fdd\u6301\u3055\u308c\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f\u968e\u5c64\u69cb\u9020\u3092\u6301\u3061\u3001Podman\u306fLinux\u30ab\u30fc\u30cd\u30eb\u306eoverlayfs\u6a5f\u80fd\u3092\u4f7f\u3044\u30a4\u30e1\u30fc\u30b8\u304c\u91cd\u306d\u5408\u308f\u3055\u308c\u305f\u7d50\u679c\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u4eca\u56de\u306e\u3088\u3046\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u7a7a\u3067\u540c\u540d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u5143\u306e\u30c7\u30fc\u30bf\u306f\u4e0a\u66f8\u304d\u3055\u308c\u307e\u305b\u3093\u3002</p> <p>\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u5f37\u5236\u7684\u306b\u524a\u9664\u3057\u307e\u3059\u3002\u307e\u305f\u540c\u6642\u306b\u30b3\u30f3\u30c6\u30ca\u3082\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ podman volume rm --force webdata1\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman volume rm --force webdata1\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman volume rm --force webdata1\nwebdata1\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>podman volume list</code>\u3001<code>podman ps</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046</p>"},{"location":"chapter3/#_4","title":"\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30de\u30a6\u30f3\u30c8\u30aa\u30d7\u30b7\u30e7\u30f3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 3.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u3053\u308c\u307e\u3067\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u6642\u306b\u4f7f\u7528\u3057\u305f<code>:ro</code>\u3084<code>:z</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u4ee5\u5916\u306b\u3082Podman\u3067\u306f\u4fbf\u5229\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"chapter3/#u","title":"U \u30dc\u30ea\u30e5\u30fc\u30e0\u30aa\u30d7\u30b7\u30e7\u30f3","text":"<p><code>:U</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u305d\u306e\u4e00\u3064\u3067\u3059\u3002\u30eb\u30fc\u30c8\u30ec\u30b9\u30b3\u30f3\u30c6\u30ca\u306b\u304a\u3051\u308b\u6240\u6709\u6a29\u306e\u554f\u984c\u3092\u7c21\u5358\u306b\u89e3\u6c7a\u3067\u304d\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\u30eb\u30fc\u30c8\u30ec\u30b9\u30b3\u30f3\u30c6\u30ca\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d7\u30ed\u30bb\u30b9\u304c<code>UID==60</code>\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u4f8b\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30b3\u30f3\u30c6\u30ca\u306b\u304a\u3051\u308b\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman unshare cat /proc/self/uid_map\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare cat /proc/self/uid_map\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare cat /proc/self/uid_map\n         0       1002          1\n         1     231072      65536\n</code></pre> <p>\u3053\u306e\u7d50\u679c\u306f\u4e0b\u8a18\u3092\u8868\u3057\u307e\u3059</p> <ul> <li>\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>UID 0</code>\u306f\u30db\u30b9\u30c8\u4e0a\u306e<code>UID 1002</code>\u306b\u30de\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002</li> <li><code>UID 1</code>\u306f<code>UID 231072</code>\u3001<code>UID 2</code>\u306f<code>UID 231073</code> ... <code>UID 65536</code>\u306f<code>UID 296607</code>\u3068\u30de\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>\u30b3\u30f3\u30c6\u30ca\u5185\u3067<code>UID 60</code>\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u66f8\u304d\u8fbc\u3080\u5834\u5408\u3001\u30db\u30b9\u30c8\u4e0a\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u6240\u6709\u6a29\u3068\u7570\u306a\u308b\u305f\u3081\u66f8\u304d\u8fbc\u307f\u304c\u3067\u304d\u307e\u305b\u3093\u3002 \u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u5185\u3067\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u6240\u6709\u6a29\u3092<code>UID 60</code>\u306b\u3059\u308b\u305f\u3081\u306b\u3001<code>podman unshare</code>\u3092\u4f7f\u7528\u3057\u3066<code>chown</code>\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p><code>podman unshare</code>\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066</p> <p><code>podman unshare</code>\u30b3\u30de\u30f3\u30c9\u306f\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u305b\u305a\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u5185\u306b\u5165\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306fPodman\u306e\u72ec\u81ea\u306e\u30b3\u30de\u30f3\u30c9\u3067Docker\u306b\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <pre><code>$ podman unshare chown 60:60 ./html\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare chown 60:60 ./html\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>ls -ld</code>\u30b3\u30de\u30f3\u30c9\u3067html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u6a29\u304c\u3069\u306e\u3088\u3046\u306b\u306a\u3063\u305f\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046 <pre><code>$ ls -ld\ndrwxr-xr-x. 2 231131 231131 6 Oct 14 14:58 html\n</code></pre></p> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u7279\u5b9a\u306eUID\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002mariadb\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306f\u305d\u306e\u4e00\u3064\u3067\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30d7\u30ed\u30bb\u30b9\u306fmysql\u30e6\u30fc\u30b6\uff08UID==999\uff09\u306b\u3088\u3063\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002</p> <p>mariadb\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306emysql\u30e6\u30fc\u30b6\u30fc\u306eUID\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>$ podman run docker.io/mariadb grep mysql /etc/passwd\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run docker.io/mariadb grep mysql /etc/passwd\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run docker.io/mariadb grep mysql /etc/passwd\nTrying to pull docker.io/library/mariadb:latest...\nGetting image source signatures\nCopying blob 50ee0c078c93 done  \nCopying blob 43f89b94cd7d done  \nCopying blob dfb413a01c7e done  \nCopying blob 1d3f76b535d3 done  \nCopying blob f7efd05ec01e done  \nCopying blob fe2ff83c75df done  \nCopying blob 6975e72928bb done  \nCopying blob 561d1b426cbd done  \nCopying config f35870862d done  \nWriting manifest to image destination\nStoring signatures\nmysql:x:999:999::/home/mysql:/bin/sh\n</code></pre> <p><code>:U</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u7279\u5b9a\u306eUID\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u6a29\u304c\u30db\u30b9\u30c8\u4e0a\u306e\u30e6\u30fc\u30b6\u30fc\uff08rhel\uff09\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ mkdir mariadb\n$ ls -ld mariadb/\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>mkdir mariadb\n</code></pre> <pre><code>ls -ld mariadb/\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ mkdir mariadb\n$ ls -ld mariadb/\ndrwxr-xr-x. 2 rhel rhel 6 Oct 14 15:25 mariadb/\n</code></pre> <p>mariadb\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p><code>:U</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057<code>mariadb</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306e<code>/var/lib/mariadb</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\u307e\u305f<code>--user mysql</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u3092<code>mysql</code>\u3068\u6307\u5b9a\u3057\u307e\u3059\u3002 <pre><code>$ podman run --user mysql -v ./mariadb:/var/lib/mariadb:U docker.io/mariadb ls -ld /var/lib/mariadb\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --user mysql -v ./mariadb:/var/lib/mariadb:U docker.io/mariadb ls -ld /var/lib/mariadb\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run --user mysql -v ./mariadb:/var/lib/mariadb:U docker.io/mariadb ls -ld /var/lib/mariadb\ndrwxr-xr-x. 2 mysql mysql 6 Oct 14 15:25 /var/lib/mariadb\n</code></pre>"},{"location":"chapter3/#podman-run-mount","title":"podman run --mount\u30b3\u30de\u30f3\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 3.1.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09<code>podman run --mount</code>\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30de\u30a6\u30f3\u30c8\u30bf\u30a4\u30d7\u3084<code>podman volume</code>\u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man podman-mount\n$ podman-volume-create\n$ podman-volume-exists\n$ podman-volume-export\n$ podman-volume-import\n$ podman-volume-inspect\n$ podman-volume-list\n$ podman-volume-prune\n$ podman-volume-rm\n</code></pre> <p>\u307e\u3068\u3081</p> <p>\u30d0\u30a4\u30f3\u30c9\u30de\u30a6\u30f3\u30c8\u3084\u540d\u524d\u4ed8\u304d\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u6c38\u7d9a\u5316\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b3\u30f3\u30c6\u30ca\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u30db\u30b9\u30c8\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u306b\u3001SELinux\u3084\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u554f\u984c\u306b\u5bfe\u51e6\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 Podman\u3067\u306f\u305d\u306e\u305f\u3081\u306e\u4fbf\u5229\u306a\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30a6\u30f3\u30c8\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"chapter4/","title":"Chapter 4\u3000Pod","text":"<ul> <li>\u30ec\u30d9\u30eb:\u521d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter4/#_1","title":"\u4e8b\u524d\u4f5c\u696d","text":"\u4e00\u822c\u30e6\u30fc\u30b6\u30fc(\u30e6\u30fc\u30b6\u30fc\u540d rhel)\u306b\u30b9\u30a4\u30c3\u30c1\u3059\u308b<pre><code># su - rhel\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>su - rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># su - rhel\n$\n</code></pre>"},{"location":"chapter4/#42-pod","title":"4.2 Pod\u306e\u4f5c\u6210","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u4e8b\u524d\u4f5c\u696d\uff08Chapter 4\u958b\u59cb\u6642\u70b9\u306e\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066\u3001\u4e0b\u8a18\u30d1\u30bf\u30fc\u30f31 or 2\u306e\u3069\u3061\u3089\u304b\u306e\u4f5c\u696d\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\uff09</p> <p>\u30d1\u30bf\u30fc\u30f31</p> <p>Chapter 3\u306e3.1.2\u3067html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u6a29\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306fhtml\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068index.html\u3092\u518d\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare rm -rf html\n</code></pre> <pre><code>mkdir html\n</code></pre> <pre><code>cat &gt; html/index.html &lt;&lt; _EOF\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Goodbye World&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>\u30d1\u30bf\u30fc\u30f32</p> <p>html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u7121\u3044\u5834\u5408\u306f\u65b0\u898f\u3067html\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068index.html\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>mkdir html\n</code></pre> <pre><code>cat &gt; html/index.html &lt;&lt; _EOF\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Goodbye World&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>Podman\u3067\u306fPod\u3068\u3044\u3046\u6a5f\u80fd\u3067\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u30921\u3064\u306e\u30b0\u30eb\u30fc\u30d7\u3068\u3057\u3066\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002<code>podman pod create</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066Pod\u3092\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002</p> <p><code>--name mypod</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066<code>mypod</code>\u3068\u3044\u3046\u540d\u524d\u306ePod\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><code>--volume</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u306f<code>-v</code>\u3067\u3082\u540c\u69d8\u3067\u3059\u3002Chapter 3\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002</p> <pre><code>$ podman pod create -p 8080:8080 --name mypod --volume ./html:/var/www/html:z\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod create -p 8080:8080 --name mypod --volume ./html:/var/www/html:z\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod create -p 8080:8080 --name mypod --volume ./html:/var/www/html:z\nb0d68450b3b7ae2d70d8a19de47142af40d0dbd94fecff97b7a1fc3996bbf07e\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p>Pod\u3092\u30ea\u30b9\u30c8\u8868\u793a\u3059\u308b</p> <p><code>podman pod ps</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066Pod\u3092\u30ea\u30b9\u30c8\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman pod ps\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod ps\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod ps\nPOD ID        NAME        STATUS      CREATED         INFRA ID      # OF CONTAINERS\n82c5059cc238  mypod       Created     44 seconds ago  7e5b68038395  1\n</code></pre> <p><code>podman pod ps</code>\u306e\u30a8\u30a4\u30ea\u30a2\u30b9</p> <p><code>podman pod ps</code>\u306e\u4ee3\u308f\u308a\u306b<code>podman pod ls</code>\u3001<code>podman pod list</code>\u4f7f\u7528\u3067\u304d\u307e\u3059</p>"},{"location":"chapter4/#43-pod","title":"4.3 Pod\u3078\u306e\u30b3\u30f3\u30c6\u30ca\u8ffd\u52a0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman create</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fPod\u5185\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><code>--pod mypod</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3067<code>mypod</code>Pod\u5185\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ podman create --pod mypod --name myapp quay.io/rhatdan/myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman create --pod mypod --name myapp quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman create --pod mypod --name myapp quay.io/rhatdan/myimage\nTrying to pull quay.io/rhatdan/myimage:latest...\nGetting image source signatures\nCopying blob e3460238f8a1 done  \nCopying blob c7765172d3ce done  \nCopying blob dfd8c625d022 done  \nCopying blob 2b782a9ad894 done  \nCopying blob a1eadb69adf1 done  \nCopying config 2c7e43d880 done  \nWriting manifest to image destination\nStoring signatures\na0e413d3270111dedca7bdffacc00da362cb01c2ce3d7052efd28356f29a1b2d\n</code></pre> <p>\u4f5c\u6210\u3057\u305fPod\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305a\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u30b5\u30a4\u30c9\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca\u306e\u7528\u610f\u3092\u3057\u307e\u3059\u3002</p> <p><code>time.sh</code>\u3068\u3044\u3046\u540d\u524d\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059 <pre><code>$ cat &gt; html/time.sh &lt;&lt; _EOL\n#!/bin/sh\ndata() {\n    echo \"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;\"; date;echo \"Hello World&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\n    sleep 1\n}\nwhile true; do\n    data &gt; index.html\ndone\n_EOL\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat &gt; html/time.sh &lt;&lt; _EOL\n#!/bin/sh\ndata() {\necho \"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;\"; date;echo \"Hello World&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\nsleep 1\n}\nwhile true; do\ndata &gt; index.html\ndone\n_EOL\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u4f5c\u6210\u3057\u305f<code>time.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059 <pre><code>$ chmod +x html/time.sh\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>chmod +x html/time.sh\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p><code>time.sh</code>\u3092\u5b9f\u884c\u3059\u308b\u30b5\u30a4\u30c9\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca\u3092mypod\u306b\u8ffd\u52a0\u3057\u307e\u3059 <pre><code>$ podman create --pod mypod --name time --workdir /var/www/html ubi8 ./time.sh\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman create --pod mypod --name time --workdir /var/www/html ubi8 ./time.sh\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman create --pod mypod --name time --workdir /var/www/html ubi8 ./time.sh\nResolved \"ubi8\" as an alias (/etc/containers/registries.conf.d/001-rhel-shortnames.conf)\nTrying to pull registry.access.redhat.com/ubi8:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob 70de3d8fc2c6 done  \nCopying config 62ac1f7ef5 done  \nWriting manifest to image destination\nStoring signatures\n85e0053dd73cde15758fd1bbe6abe59cd1f8e9ebce318459039d8921db7b2ab5\n</code></pre>"},{"location":"chapter4/#44-pod","title":"4.4 Pod\u306e\u8d77\u52d5","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u3053\u3053\u307e\u3067\u306b\u3001Pod\u306e\u4f5c\u6210\u3001\u5b9f\u884c\u306e\u4e2d\u5fc3\u3068\u306a\u308b\u30d7\u30e9\u30a4\u30de\u30ea\u30b3\u30f3\u30c6\u30ca\u306e\u8ffd\u52a0\u3001\u30b5\u30a4\u30c9\u30ab\u30fc\u30b3\u30f3\u30c6\u30ca\u306e\u8ffd\u52a0\u3092\u884c\u3044\u307e\u3057\u305f\u3002\u3053\u306e\u6642\u70b9\u3067\u306fPod\u306b\u8ffd\u52a0\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306f\u505c\u6b62\u3057\u3066\u3044\u307e\u3059\u3002<code>podman pod start</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066Pod\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p><code>mypod</code>Pod\u3092\u8d77\u52d5\u3057\u307e\u3059 <pre><code>$ podman pod start mypod\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod start mypod\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod start mypod\nb0d68450b3b7ae2d70d8a19de47142af40d0dbd94fecff97b7a1fc3996bbf07e\n</code></pre> <p>\u30b3\u30f3\u30c6\u30ca\u30d7\u30ed\u30bb\u30b9\u3092\u4e00\u89a7\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman ps\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps\nCONTAINER ID  IMAGE                                    COMMAND               CREATED             STATUS         PORTS                   NAMES\nb0daeb8cf4ae  localhost/podman-pause:4.4.1-1682527828                        About a minute ago  Up 23 seconds  0.0.0.0:8080-&gt;8080/tcp  b0d68450b3b7-infra\na0e413d32701  quay.io/rhatdan/myimage:latest           /usr/bin/run-http...  About a minute ago  Up 23 seconds  0.0.0.0:8080-&gt;8080/tcp  myapp\n85e0053dd73c  registry.access.redhat.com/ubi8:latest   ./time.sh             35 seconds ago      Up 23 seconds  0.0.0.0:8080-&gt;8080/tcp  time\n</code></pre> <p>infra\u30b3\u30f3\u30c6\u30ca\u306b\u3064\u3044\u3066</p> <p><code>podman ps</code>\u306e\u51fa\u529b\u306b<code>localhost/podman-pause</code>\u30b3\u30f3\u30c6\u30ca\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306finfra\u30b3\u30f3\u30c6\u30ca\u3068\u547c\u3070\u308c\u3001Pod\u306e\u4f5c\u6210\u6642\u306bPodman\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u81ea\u52d5\u3067\u4f5c\u6210\u3057\u5b9f\u884c\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u51e6\u7406\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u305f\u3081\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092pull\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p><code>podman pod ps</code>\u30b3\u30de\u30f3\u30c9\u3067Pod\u3092\u30ea\u30b9\u30c8\u8868\u793a\u3057\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman pod ps\nPOD ID        NAME        STATUS      CREATED         INFRA ID      # OF CONTAINERS\n82c5059cc238  mypod       Running     19 minutes ago  7e5b68038395  3\n</code></pre></p>"},{"location":"chapter4/#45-pod","title":"4.5 Pod\u306e\u505c\u6b62","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman pod stop</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066Pod\u3092\u505c\u6b62\u3057\u307e\u3059\u3002</p> <p><code>mypod</code>Pod\u3092\u505c\u6b62\u3057\u307e\u3059 <pre><code>$ podman pod stop mypod\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod stop mypod\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod stop mypod\nWARN[0010] StopSignal SIGTERM failed to stop container time in 10 seconds, resorting to SIGKILL \nb0d68450b3b7ae2d70d8a19de47142af40d0dbd94fecff97b7a1fc3996bbf07e\n</code></pre> <p><code>-t</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5024\u3092\u6307\u5b9a\u3057\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e10\u79d2\u306e\u5f85\u6a5f\u5f8c\u306b\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u30d7\u30ed\u30bb\u30b9\u304c\u505c\u6b62\u3057\u307e\u3059</p> <p>\u30b3\u30f3\u30c6\u30ca\u30d7\u30ed\u30bb\u30b9\u3092\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman ps\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps\nCONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES\n</code></pre>"},{"location":"chapter4/#46-pod","title":"4.6 Pod\u306e\u8868\u793a","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Pod\u3092\u4e00\u89a7\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman pod list\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod list\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod list\nPOD ID        NAME        STATUS      CREATED        INFRA ID      # OF CONTAINERS\nb0d68450b3b7  mypod       Exited      4 minutes ago  b0daeb8cf4ae  3\n</code></pre>"},{"location":"chapter4/#47-pod","title":"4.7 Pod\u306e\u524a\u9664","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 4.7\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>podman ps --all</code>\u30b3\u30de\u30f3\u30c9\u306b<code>--format</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u8868\u793a\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f<code>ID</code>\u3001<code>Image</code>\u3001<code>Pod</code>\u306e3\u3064\u306e\u8981\u7d20\u3067\u30d5\u30a3\u30eb\u30bf\u3057\u307e\u3059\u3002 <pre><code>$ podman ps --all --format \"{{.ID}} {{.Image}} {{.Pod}}\"\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps --all --format \"{{.ID}} {{.Image}} {{.Pod}}\"\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps --all --format \"{{.ID}} {{.Image}} {{.Pod}}\"\n0be17615d860 localhost/podman-pause:4.4.1-1682527828 77b6932c9c44\n38e5aa95c038 quay.io/rhatdan/myimage:latest 77b6932c9c44\ne2e5f14febab registry.access.redhat.com/ubi8:latest 77b6932c9c44\n</code></pre> <p><code>mypod</code>Pod\u3092\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ podman pod rm mypod\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod rm mypod\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod rm mypod\n77b6932c9c44581ecd58130cb6a82bc112fee66eac0e01ece5f2908409f02d2a\n</code></pre> <p>Pod\u3092\u4e00\u89a7\u8868\u793a\u3057\u307e\u3059 <pre><code>$ podman pod ls\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pod ls\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pod ls\nPOD ID      NAME        STATUS      CREATED     INFRA ID    # OF CONTAINERS\n</code></pre> <p><code>podman ps -a</code>\u30b3\u30de\u30f3\u30c9\u306b<code>--format</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u8868\u793a\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f<code>ID</code>\u3001<code>Image</code>\u306e2\u3064\u306e\u8981\u7d20\u3067\u30d5\u30a3\u30eb\u30bf\u3057\u307e\u3059\u3002 <pre><code>$ podman ps -a --format \"{{.ID}} {{.Image}}\"\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman ps -a --format \"{{.ID}} {{.Image}}\"\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman ps -a --format \"{{.ID}} {{.Image}}\"\n$\n</code></pre>"},{"location":"chapter5/","title":"Chapter 5 \u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e2d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter5/#_1","title":"\u4e8b\u524d\u4f5c\u696d","text":"\u4e00\u822c\u30e6\u30fc\u30b6\u30fc(\u30e6\u30fc\u30b6\u30fc\u540d rhel)\u306b\u30b9\u30a4\u30c3\u30c1\u3059\u308b<pre><code># su - rhel\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>su - rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># su - rhel\n$\n</code></pre>"},{"location":"chapter5/#51","title":"5.1 \u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 5.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Podman\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30ec\u30a4\u30e4\u30fc\u3001\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u4fdd\u5b58\u306b<code>containers/storage</code>\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 <code>storage.conf</code>\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3053\u308c\u3089\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4fdd\u5b58\u5148\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002</p> <p><code>podman info</code>\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u529b\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u3001Podman\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b<code>storage.conf</code>\u306e\u5834\u6240\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman info --format '{{ .Store.ConfigFile }}'\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info --format '{{ .Store.ConfigFile }}'\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info --format '{{ .Store.ConfigFile }}'\n/home/rhel/.config/containers/storage.conf\n</code></pre>"},{"location":"chapter5/#_2","title":"\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u5834\u6240","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 5.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>/etc/containers/storage.conf</code>\u3092\u4f7f\u7528\u3057\u3066\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u3092\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002</p> <p>\u307e\u305a\u3001<code>sudo</code>\u4ed8\u304d\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002</p> <p><code>sudo</code>\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f<code>redhat</code>\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u753b\u9762\u4e0a\u306f\u5165\u529b\u6587\u5b57\u306f\u898b\u3048\u307e\u305b\u3093\uff09</p> <pre><code>...\u7701\u7565...\n[sudo] password for rhel: redhat\n</code></pre> <pre><code>$ sudo cp /etc/containers/storage.conf /etc/containers/storage.conf.orig\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo cp /etc/containers/storage.conf /etc/containers/storage.conf.orig\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ sudo cp /etc/containers/storage.conf /etc/containers/storage.conf.orig\n\nWe trust you have received the usual lecture from the local System\nAdministrator. It usually boils down to these three things:\n\n    #1) Respect the privacy of others.\n    #2) Think before you type.\n    #3) With great power comes great responsibility.\n\n[sudo] password for rhel: \n</code></pre> <p>\u30b9\u30c8\u30ec\u30fc\u30b8\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\uff08<code>/etc/containers/storage.conf\uff09\u306e\u5909\u66f4\u3092\u884c\u3044\u307e\u3059\u3002</code>graphroot = \"/var/lib/containers/storage\"<code>\u3068\u306a\u3063\u3066\u3044\u308b\u7b87\u6240\u3092</code>graphroot = \"/var/mystorage\"<code>\u306b\u5909\u66f4\u3057\u307e\u3059\u3002</code>sudo<code>\u4ed8\u304d\u3067</code>sed<code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08</code>vi`\u30b3\u30de\u30f3\u30c9\u3067\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002 <pre><code>$ sudo sed -i 's/graphroot = \"\\/var\\/lib\\/containers\\/storage\"/graphroot = \"\\/var\\/mystorage\"/' /etc/containers/storage.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo sed -i 's/graphroot = \"\\/var\\/lib\\/containers\\/storage\"/graphroot = \"\\/var\\/mystorage\"/' /etc/containers/storage.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u5e38\u306b\u5909\u66f4\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ grep -B 1 mystorage /etc/containers/storage.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>grep -B 1 mystorage /etc/containers/storage.conf\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ grep -B 1 mystorage /etc/containers/storage.conf\n# restorecon -R -v /NEWSTORAGEPATH\ngraphroot = \"/var/mystorage\"\n</code></pre> <p>\u30eb\u30fc\u30c8\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002<code>graphRoot:</code>\u3001<code>volumePath:</code>\u304c\u5909\u66f4\u3057\u305f\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ sudo podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ sudo podman info\n...\nstore:\n  configFile: /etc/containers/storage.conf\n...\n  graphRoot: /var/mystorage\n...\n  volumePath: /var/mystorage/volumes\n...\n</code></pre> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002<code>graphRoot:</code>\u3001<code>volumePath:</code>\u304c\u8a2d\u5b9a\u5909\u66f4\u524d\u306e\u307e\u307e\u3067\u3042\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>$ podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info\n...\nstore:\n  configFile: /home/rhel/.config/containers/storage.conf\n...\n  graphRoot: /home/rhel/.local/share/containers/storage\n...\n volumePath: /home/rhel/.local/share/containers/storage/volumes\n...\n</code></pre> <p><code>/etc/containers/storage.conf</code>\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3001<code>rootless_storage_path</code>\u30ad\u30fc\u3092\u4f7f\u7528\u3057\u3066\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u5168\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u5834\u6240\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u8a72\u5f53\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u3001\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002<code>rootless_storage_path = \"/var/tmp/$UID/var/mystorage\"</code></p> <p><code>sudo</code>\u4ed8\u304d\u3067<code>sed</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08<code>vi</code>\u30b3\u30de\u30f3\u30c9\u3067\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002 <pre><code>$ sudo sed -i 's/^# rootless_storage_path = \"\\$HOME\\/\\.local\\/share\\/containers\\/storage\"/rootless_storage_path = \"\\/var\\/tmp\\/\\$UID\\/var\\/mystorage\"/' /etc/containers/storage.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo sed -i 's/^# rootless_storage_path = \"$HOME\\/.local\\/share\\/containers\\/storage\"/rootless_storage_path = \"$HOME\\/.local\\/share\\/containers\\/storage\"/' /etc/containers/storage.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u5e38\u306b\u5909\u66f4\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ grep -B 3 rootless_storage_path /etc/containers/storage.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>grep -B 3 rootless_storage_path /etc/containers/storage.conf\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ grep -B 3 rootless_storage_path /etc/containers/storage.conf\n\n# Storage path for rootless users\n#\nrootless_storage_path = \"/var/tmp/$UID/var/mystorage\"\n</code></pre> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002<code>configFile:</code>\u304c\u5143\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u307e\u307e\u3067\u3042\u308a\u306a\u304c\u3089\u3001<code>graphRoot:</code>\u3001<code>volumePath:</code>\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info\n...\nstore:\n  configFile: /home/rhel/.config/containers/storage.conf\n...\n graphRoot: /var/tmp/1002/var/mystorage\n...\n  volumePath: /var/tmp/1002/var/mystorage/volumes\n...\n</code></pre> <p>\u5909\u66f4\u3092\u5143\u306b\u623b\u3059\u306b\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u5143\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>cp</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ sudo cp /etc/containers/storage.conf.orig /etc/containers/storage.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo cp /etc/containers/storage.conf.orig /etc/containers/storage.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u5143\u306b\u623b\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"chapter5/#_3","title":"\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 5.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09<code>storage.conf</code>\u306e\u5168\u3066\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man containers-storage.conf\n</code></pre>"},{"location":"chapter5/#52","title":"5.2 \u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":""},{"location":"chapter5/#registriesconf","title":"registries.conf","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 5.2.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Podman\u306f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u30d7\u30eb\u3001\u30d7\u30c3\u30b7\u30e5\u306b<code>containers/image</code>\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 <code>registries.conf</code>\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u307e\u305f\u3001<code>policy.json</code>\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u7f72\u540d\u3092\u691c\u8a3c\u3057\u307e\u3059\u3002</p> <p>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u7f72\u540d\u306b\u3064\u3044\u3066</p> <p>\u672c\u66f8 11.3 Podman\u306b\u3088\u308b\u30a4\u30e1\u30fc\u30b8\u306e\u4fe1\u983c\u306b\u3066<code>policy.json</code>\u3092\u4f7f\u7528\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u7f72\u540d\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306e\u89e3\u8aac\u304c\u3042\u308a\u307e\u3059\u3002</p> <p><code>/etc/containers/registries.conf</code>\u3092\u4f7f\u7528\u3057\u3066\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002</p> <p>\u307e\u305a\u3001<code>sudo</code>\u4ed8\u304d\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30ec\u30b8\u30b9\u30c8\u30ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002 <pre><code>$ sudo cp /etc/containers/registries.conf /etc/containers/registries.conf.orig\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo cp /etc/containers/registries.conf /etc/containers/registries.conf.orig\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u77ed\u7e2e\u540d\u3067\u30d7\u30eb\u3059\u308b\u969b\u3001\u4e8b\u524d\u306b\u89e3\u6c7a\u304c\u7528\u610f\u3055\u308c\u305f\u3082\u306e\u4ee5\u5916\u306f\u8868\u793a\u3055\u308c\u305f\u9078\u629e\u80a2\u306e\u4e2d\u304b\u3089\u30ec\u30b8\u30b9\u30c8\u30ea\u3092\u9078\u3073\u307e\u3059\u3002 \u30ec\u30b8\u30b9\u30c8\u30ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e<code>unqualified-search-registries</code>\u306e\u884c\u306e\u4e2d\u306e<code>docker.io</code>\u3092\u524a\u9664\u3057<code>example.com</code>\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>sed</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08<code>vi</code>\u30b3\u30de\u30f3\u30c9\u3067\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002 <pre><code>$ sudo sed -i 's/unqualified-search-registries = \\[\"registry.access.redhat.com\", \"registry.redhat.io\", \"docker.io\"\\]/unqualified-search-registries = \\[\"registry.access.redhat.com\", \"registry.redhat.io\", \"example.com\"\\]/' /etc/containers/registries.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo sed -i 's/unqualified-search-registries = \\[\"registry.access.redhat.com\", \"registry.redhat.io\", \"docker.io\"\\]/unqualified-search-registries = \\[\"registry.access.redhat.com\", \"registry.redhat.io\", \"example.com\"\\]/' /etc/containers/registries.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u5e38\u306b\u5909\u66f4\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057<code>search:</code>\u306b<code>docker.io</code>\u306e\u4ee3\u308f\u308a\u306b<code>example.com</code>\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info\n...\nregistries:\n  search:\n  - registry.access.redhat.com\n  - registry.redhat.io\n  - example.com\n...\n</code></pre> <p>\u77ed\u7e2e\u540d\u3067\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3066\u307f\u307e\u3059\u3002<code>foobar</code>\u3068\u3044\u3046\u9069\u5f53\u306a\u540d\u524d\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3066<code>podman pull</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u304b\u3089\u30d7\u30eb\u3059\u308b\u304b\u306e\u9078\u629e\u80a2\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067<code>docker.io</code>\u306e\u4ee3\u308f\u308a\u306b<code>example.com</code>\u304c\u9078\u629e\u80a2\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <pre><code>$ podman pull foobar\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pull foobar\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pull foobar\n? Please select an image: \n  \u25b8 registry.access.redhat.com/foobar:latest\n    registry.redhat.io/foobar:latest\n    example.com/foobar:latest\n</code></pre> <p>\u30d7\u30eb\u3092\u5f37\u5236\u7684\u306b\u505c\u6b62\u3059\u308b\u306b\u306f Ctrl+C \u3092\u62bc\u3057\u307e\u3059</p> <p>\u5909\u66f4\u3092\u5143\u306b\u623b\u3059\u306b\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u5143\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>cp</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ sudo cp /etc/containers/registries.conf.orig /etc/containers/registries.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo cp /etc/containers/registries.conf.orig /etc/containers/registries.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\uff09</p> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057\u3001\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u5143\u306b\u623b\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305f<code>podman pull foobar</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066<code>docker.io</code>\u304c\u9078\u629e\u80a2\u306b\u8868\u793a\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002</p>"},{"location":"chapter5/#_4","title":"\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u304b\u3089\u306e\u30d7\u30eb\u3092\u30d6\u30ed\u30c3\u30af\u3059\u308b","text":"<p>\u30ec\u30b8\u30b9\u30c8\u30ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u884c\u3044\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>sed</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08<code>vi</code>\u30b3\u30de\u30f3\u30c9\u3067\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002 <pre><code>$ sudo sed -i 's/# \\[\\[registry\\]\\]/\\[\\[registry\\]\\]\\nLocation = \"docker.io\"\\nblocked=true/' /etc/containers/registries.conf\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u304c\u6b63\u5e38\u306b\u5909\u66f4\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067<code>podman info</code>\u3092\u5b9f\u884c\u3057<code>registries:</code>\u306b<code>docker.io</code>\u304c<code>Blocked: true</code>\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman info\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman info\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman info\n...\nregistries:\n  docker.io:\n    Blocked: true\n...\n</code></pre> <p><code>docker.io</code>\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3001\u5b9f\u884c\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman pull docker.io/ubuntu\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman pull docker.io/ubuntu\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman pull docker.io/ubuntu\nTrying to pull docker.io/library/ubuntu:latest...\nError: initializing source docker://ubuntu:latest: registry docker.io is blocked in /etc/containers/registries.conf or /home/rhel/.config/containers/registries.conf.d\n</code></pre> <p>\u5909\u66f4\u3092\u5143\u306b\u623b\u3059\u306b\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u5143\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>cp</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ sudo cp /etc/containers/registries.conf.orig /etc/containers/registries.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo cp /etc/containers/registries.conf.orig /etc/containers/registries.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u9694\u96e2\u74b0\u5883\u3067\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u72b6\u6cc1\u304c\u3042\u308a\u307e\u3059\u3002\u5185\u90e8\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u304b\u3089\u30df\u30e9\u30fc\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u7f6e\u304d\u3001\u540c\u3058\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3066\u5185\u90e8\u306e\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u5165\u624b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u30ec\u30b8\u30b9\u30c8\u30ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6b21\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002 <pre><code>\n</code></pre></p> <p>\u30ec\u30b8\u30b9\u30c8\u30ea\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u884c\u3044\u307e\u3059\u3002 <code>sudo</code>\u4ed8\u304d\u3067<code>sed</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff08<code>vi</code>\u30b3\u30de\u30f3\u30c9\u3067\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002</p> <pre><code>$ sudo sed -i '/# \\[\\[registry\\]\\]/s/# \\[\\[registry\\]\\]/\\[\\[registry\\]\\]\\nlocation=\"registry.access.redhat.com\"\\n[[registry.mirror]]\\nlocation=\"mirror-1.com\"/' /etc/containers/registries.conf\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>sudo sed -i '/# \\[\\[registry\\]\\]/s/# \\[\\[registry\\]\\]/\\[\\[registry\\]\\]\\nlocation=\"registry.access.redhat.com\"\\n[[registry.mirror]]\\nlocation=\"mirror-1.com\"/' /etc/containers/registries.conf\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <pre><code>$ podman pull registry.access.redhat.com/ubi8/httpd-24:latest\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09<code>registries.conf</code>\u306e\u5168\u3066\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man containers-registries.conf\n</code></pre>"},{"location":"chapter5/#53","title":"5.3 \u30a8\u30f3\u30b8\u30f3\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 5.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Podman\u3067\u5b9f\u884c\u3059\u308b\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u540c\u3058\u74b0\u5883\u5909\u6570\u3092\u3057\u307e\u3059\u3002 <code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3067UBI 8\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u74b0\u5883\u5909\u6570\u3092\u8868\u793a\u3057\u307e\u3059\u3002<code>--rm</code>\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u3044\u308b\u306e\u3067\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3001<code>printenv</code>\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u305f\u5f8c\u30b3\u30f3\u30c6\u30ca\u306f\u505c\u6b62\u3068\u3068\u3082\u306e\u524a\u9664\u3055\u308c\u307e\u3059\u3002 <pre><code>$ podman run --rm ubi8 printenv\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --rm ubi8 printenv\n</code></pre></p> \u51fa\u529b\u7d50\u679c <p>Info</p> <p><code>HOSTNAME</code>\u306f\u30b3\u30f3\u30c6\u30ca\u306e\u5b9f\u884c\u306e\u5ea6\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u3082\u306e\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059</p> <pre><code>$ podman run --rm ubi8 printenv\nResolved \"ubi8\" as an alias (/etc/containers/registries.conf.d/000-shortnames.conf)\nTrying to pull registry.access.redhat.com/ubi8:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob sha256:a0534d4abf263a5a894b1468dc1e3c785b1e9b29a9e78c8a5e8a99b4f1badb27\nCopying config sha256:8adef039dbf2331ae2dc8cba0742b499ba11c7b0f9fea33a996d9751fb2f4baf\nWriting manifest to image destination\nStoring signatures\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\ncontainer=oci\nHOME=/root\nHOSTNAME=09f826169179\n</code></pre> <p>\u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067\u306e\u5b9f\u884c\u306b\u9069\u7528\u3059\u308b\u305f\u3081\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b<code>env.conf</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u74b0\u5883\u5909\u6570<code>foo=bar</code>\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b<code>env=[ \"foo=bar\" ]</code>\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</p> <p><code>env.conf</code>\u306b\u3064\u3044\u3066</p> <p>\u5b9f\u969b\u306b\u306f<code>containers.conf.d</code>\u306b\u3042\u308b<code>*.conf</code>\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f<code>env.conf</code>\u3067\u306a\u304f\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002</p> <pre><code>$ mkdir -p $HOME/.config/containers/containers.conf.d\n$ cat &lt;&lt; _EOF &gt; $HOME/.config/containers/containers.conf.d/env.conf\n[containers]\nenv=[ \"foo=bar\" ]\n_EOF\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>mkdir -p $HOME/.config/containers/containers.conf.d\n</code></pre> <pre><code>cat &lt;&lt; _EOF &gt; $HOME/.config/containers/containers.conf.d/env.conf\n[containers]\nenv=[ \"foo=bar\" ]\n_EOF\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u518d\u5ea6<code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3067\u74b0\u5883\u5909\u6570\u3092\u8868\u793a\u3059\u308b\u3068<code>foo=bar</code>\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>$ podman run --rm ubi8 printenv\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --rm ubi8 printenv\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run --rm ubi8 printenv\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nTERM=xterm\ncontainer=oci\nfoo=bar\nHOME=/root\nHOSTNAME=0b22561c7753\n</code></pre> <p>Podman\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f<code>containers.conf</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 Podman\u3092CI/CD\u30b7\u30b9\u30c6\u30e0\u3067\u5b9f\u884c\u3057\u305f\u308a\u3001\u5404Linux\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u3088\u308a\u3082\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306ePodman\u3092\u8a66\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u306b\u304a\u3044\u3066\u3001Podman\u3092\u30b3\u30f3\u30c6\u30ca\u3067\u5b9f\u884c\u3059\u308b\u30cb\u30fc\u30ba\u304c\u3042\u308a\u307e\u3059\uff08Podman in Podman\u3068\u3082\u8a00\u3046\uff09\u3002 \u305d\u306e\u969b\u306b\u4f7f\u7528\u3067\u304d\u308b\u306e\u304cPodman\u306e\u516c\u5f0f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8<code>quay.io/podman/stable</code>\u3067\u3059\u3002 Podman\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u9069\u5207\u306a\u8a2d\u5b9a\u3092\u884c\u3046\u305f\u3081\u306b<code>containers.conf</code>\u3092\u5229\u7528\u3057\u3066\u8a2d\u5b9a\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002</p> <p><code>podman/stable</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3057\u3001<code>containers.conf</code>\u306e\u5185\u5bb9\u3092\u53c2\u7167\u3057\u307e\u3059\u3002 <pre><code>$ podman run quay.io/podman/stable cat /etc/containers/containers.conf\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run quay.io/podman/stable cat /etc/containers/containers.conf\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run quay.io/podman/stable cat /etc/containers/containers.conf\nTrying to pull quay.io/podman/stable:latest...\nGetting image source signatures\nCopying blob 45055f372b99 done  \nCopying blob b30887322388 done  \nCopying blob 7978d18623f4 done  \nCopying blob a6e2d067da71 done  \nCopying blob 584c4c05fc10 done  \nCopying blob 383f5c3bb112 done  \nCopying blob c0c0aed1fa32 done  \nCopying blob aa2f3b2edf32 done  \nCopying config 7ad06408d5 done  \nWriting manifest to image destination\nStoring signatures\n[containers]\nnetns=\"host\"\nuserns=\"host\"\nipcns=\"host\"\nutsns=\"host\"\ncgroupns=\"host\"\ncgroups=\"disabled\"\nlog_driver = \"k8s-file\"\n[engine]\ncgroup_manager = \"cgroupfs\"\nevents_logger=\"file\"\nruntime=\"crun\"\n</code></pre> <p><code>podman/stable</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 <pre><code>$ podman run --security-opt label=disable --device /dev/fuse --user podman quay.io/podman/stable podman run ubi8-micro echo hi\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --security-opt label=disable --device /dev/fuse --user podman quay.io/podman/stable podman run ubi8-micro echo hi\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run --security-opt label=disable --device /dev/fuse --user podman quay.io/podman/stable podman run ubi8-micro echo hi\nResolved \"ubi8-micro\" as an alias (/etc/containers/registries.conf.d/000-shortnames.conf)\nTrying to pull registry.access.redhat.com/ubi8-micro:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob sha256:65c9e8ba90a0ebb7228c51a4e3fdaa4a759ab28d24446b84760bd8fc9890d585\nCopying config sha256:19a567442b093c27c72d9689b5b9cf9c1a42eb8c9bb151ba4e00af324052edb8\nWriting manifest to image destination\nStoring signatures\nhi\n</code></pre> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09<code>containers.conf</code>\u306e\u5168\u3066\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man containers.conf\n</code></pre> <p>\u307e\u3068\u3081</p> <p>Podman\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u5404\u7a2e\u30d5\u30a1\u30a4\u30eb\u3068\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u3092\u884c\u3063\u305f\u6642\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u5b66\u3073\u307e\u3057\u305f\u3002 \u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb<code>storage.conf</code>\u3001\u30ec\u30b8\u30b9\u30c8\u30ea\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb<code>registries.conf</code>\u3001\u30b3\u30f3\u30c6\u30ca\u30a8\u30f3\u30b8\u30f3\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb<code>containers.conf</code>\u3001\u305d\u308c\u305e\u308c\u306b\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u3067Podman\u306e\u52d5\u4f5c\u3092\u8a73\u7d30\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002Podman\u516c\u5f0f\u304b\u3089<code>podman/stable</code>\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3059\u308b\u300cPodman in Podman\u300d\u3082\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"chapter6/","title":"Chapter 6 \u30eb\u30fc\u30c8\u30ec\u30b9\u30b3\u30f3\u30c6\u30ca","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e0a\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:30\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter6/#_1","title":"\u4e8b\u524d\u4f5c\u696d","text":"\u4e00\u822c\u30e6\u30fc\u30b6\u30fc(\u30e6\u30fc\u30b6\u30fc\u540d rhel)\u306b\u30b9\u30a4\u30c3\u30c1\u3059\u308b<pre><code># su - rhel\n</code></pre> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>su - rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code># su - rhel\n$\n</code></pre>"},{"location":"chapter6/#61-podman","title":"6.1 \u30eb\u30fc\u30c8\u30ec\u30b9Podman\u306e\u4ed5\u7d44\u307f","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>\u74b0\u5883\u3092\u30af\u30ea\u30fc\u30f3\u306b\u3059\u308b\u305f\u3081\u306b\u30ed\u30fc\u30ab\u30eb\u306b\u3042\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u5f37\u5236\u7684\u306b\u5168\u3066\u524a\u9664\u3057\u307e\u3059\u3002 <pre><code>$ podman rmi --all --force\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman rmi --all --force\n</code></pre></p> \u51fa\u529b\u7d50\u679c <p>\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u9032\u884c\u72b6\u6cc1\u306b\u3088\u308a\u51fa\u529b\u5185\u5bb9\u306f\u5909\u308f\u308a\u307e\u3059</p> <pre><code>$ podman rmi --all --force\nUntagged: registry.access.redhat.com/ubi8:latest\nUntagged: quay.io/podman/stable:latest\nDeleted: 4c0f6aace7053de3b9c1476b33c9a763e45a099c8c7ae9117773c9a8e5b8506b\nDeleted: 7ad06408d57d20259f8e57797572097ba6c0793f3ea2786805152ae5391d8d9c\n</code></pre> <p>\u7b2c2\u7ae0\u306e\u74b0\u5883\u3092\u518d\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u3001<code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3001<code>myapp</code>\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>$ podman run -d -p 8080:8080 --name myapp quay.io/rhatdan/myimage\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -d -p 8080:8080 --name myapp quay.io/rhatdan/myimage\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -d -p 8080:8080 --name myapp quay.io/rhatdan/myimage\nTrying to pull quay.io/rhatdan/myimage:latest...\nGetting image source signatures\nCopying blob e3460238f8a1 done  \nCopying blob c7765172d3ce done  \nCopying blob dfd8c625d022 done  \nCopying blob 2b782a9ad894 done  \nCopying blob a1eadb69adf1 done  \nCopying config 2c7e43d880 done  \nWriting manifest to image destination\nStoring signatures\ncb7f4b2cbdc01a4ca1a3cbc3fe9a28b558907caba1fc711419e4cdd2e3682cdd\n</code></pre>"},{"location":"chapter6/#uid","title":"\u8907\u6570\u306e\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50(UID)\u306b\u3088\u3063\u3066\u6240\u6709\u3055\u308c\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u542b\u307e\u308c\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p><code>quay.io/rhatdan/myimage</code>\u30a4\u30e1\u30fc\u30b8\u5185\u306e\u5168\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8abf\u3079\u308b\u305f\u3081\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>$ podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n0=root\n48=apache\n1001=default\n65534=nobody\n</code></pre>"},{"location":"chapter6/#_2","title":"\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593","text":"<p>Linux\u306f\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u308a\u3001\u30db\u30b9\u30c8\u4e0a\u306eUID/GID\u3092\u540d\u524d\u7a7a\u9593\u306e\u7570\u306a\u308bUID/GID\u3078\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u540d\u524d\u7a7a\u9593\u306e\u8a73\u7d30\u306a\u8aac\u660e\u306f<code>user_namespaces</code>\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man user_namespaces\n</code></pre> <p><code>/etc/subuid</code>\u3068<code>/etc/subgid</code>\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ cat /etc/subuid\n$ cat /etc/subgid\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat /etc/subuid\n</code></pre> <pre><code>cat /etc/subgid\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ cat /etc/subuid\nmyee:100000:65536\nehendricks:165536:65536\nrhel:231072:65536\ngke-930957db5604c7804fbd:296608:65536\ngke-f34473de869e40d6894d:362144:65536\nmochtar:427680:65536\n$ cat /etc/subgid\nmyee:100000:65536\nehendricks:165536:65536\nrhel:231072:65536\ngke-930957db5604c7804fbd:296608:65536\ngke-f34473de869e40d6894d:362144:65536\nmochtar:427680:65536\n</code></pre> <p>Original <pre><code>$ cat /proc/self/uid_map\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>cat /proc/self/uid_map\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ cat /proc/self/uid_map\n         0          0 4294967295\n</code></pre> <p>Original <pre><code>$ podman unshare cat /proc/self/uid_map\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare cat /proc/self/uid_map\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare cat /proc/self/uid_map\n         0       1002          1\n         1     231072      65536\n</code></pre> <p>Original <pre><code>$ podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run --user=root --rm quay.io/rhatdan/myimage -- bash -c \"find / -mount -printf \\\"%U=%u\\n\\\" | sort -un\" 2&gt;/dev/null\n0=root\n48=apache\n1001=default\n65534=nobody\n</code></pre> <p>\u30db\u30b9\u30c8\u4e0a\u306e<code>/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ ls -ld /\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls -ld /\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ ls -ld /\ndr-xr-xr-x. 18 root root 235 Nov  2  2022 /\n</code></pre> <p>\u540d\u524d\u7a7a\u9593\u5185\u306e<code>/</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u3092\u78ba\u8a8d\u3057\u307e\u3059 <pre><code>$ podman unshare ls -ld /\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare ls -ld /\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare ls -ld /\ndr-xr-xr-x. 18 nobody nobody 235 Nov  2  2022 /\n</code></pre> <p>Original <pre><code>$ podman unshare bash -c \"id ; ls -l /etc/passwd; grep dwalsh /etc/passwd; touch /etc/passwd\"\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare bash -c \"id ; ls -l /etc/passwd; grep dwalsh /etc/passwd; touch /etc/passwd\"\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare bash -c \"id ; ls -l /etc/passwd; grep dwalsh /etc/passwd; touch /etc/passwd\"\nuid=0(root) gid=0(root) groups=0(root),65534(nobody) context=system_u:system_r:container_runtime_t:s0\n-rw-r--r--. 1 nobody nobody 1808 Oct 16 08:24 /etc/passwd\ntouch: cannot touch '/etc/passwd': Permission denied\n</code></pre> <p>\u4eca\u5ea6\u306f\u30e6\u30fc\u30b6\u30fc\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u6a29\u3092\u30db\u30b9\u30c8\u4e0a\u3068\u540d\u524d\u7a7a\u9593\u5185\u3068\u6bd4\u3079\u307e\u3059\u3002 <pre><code>$ ls -ld /home/rhel\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls -ld /home/rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ ls -ld /home/rhel\ndrwx------. 4 rhel rhel 91 Oct 16 08:28 /home/rhel\n</code></pre> <p>\u540d\u524d\u7a7a\u9593\u5185\u3067\u306f\u6240\u6709\u6a29\u306f<code>root</code>\u306b\u306a\u308a\u307e\u3059\u3002 <pre><code>$ podman unshare ls -ld /home/rhel\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare ls -ld /home/rhel\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare ls -ld /home/rhel\ndrwx------. 4 root root 91 Oct 16 08:28 /home/rhel\n</code></pre> <p>\u540d\u524d\u7a7a\u9593\u5185\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001UID\u3068GID\u3092<code>1:1</code>\u306b\u5909\u66f4\u3057\u307e\u3059 <pre><code>$ podman unshare bash -c \"mkdir test;touch test/testfile; chown -R 1:1 test\"\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare bash -c \"mkdir test;touch test/testfile; chown -R 1:1 test\"\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u306e\u5916\u3067\u6240\u6709\u6a29\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u3053\u306e\u74b0\u5883\u3067\u306f<code>231072</code> <pre><code>$ ls -l test\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls -l test\n</code></pre></p> \u51fa\u529b\u7d50\u679c <p>UID/GID\u306e\u756a\u53f7\u306f\u5b9f\u884c\u3059\u308b\u30db\u30b9\u30c8\u306e\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u308f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code>$ ls -l test\ntotal 0\n-rw-r--r--. 1 231072 231072 0 Oct 16 08:53 testfile\n</code></pre> <p><code>test</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092<code>rm</code>\u30b3\u30de\u30f3\u30c9\u3067\u524a\u9664\u3057\u3066\u3082\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u524a\u9664\u3067\u304d\u307e\u305b\u3093\u3002\u540d\u524d\u7a7a\u9593\u306e\u5916\u3067\u306f\u81ea\u8eab\u306eUID\u306b\u306e\u307f\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u305f\u3081\u3067\u3059\u3002 <pre><code>$ rm -rf test\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>rm -rf test\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ rm -rf test\nrm: cannot remove 'test/testfile': Permission denied\n</code></pre> <p><code>podman unshare</code>\u30b3\u30de\u30f3\u30c9\u3067\u540d\u524d\u7a7a\u9593\u306b\u5165\u308a\u3001<code>rm</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u524a\u9664\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ podman unshare rm -rf test\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare rm -rf test\n</code></pre></p> <p>\u51fa\u529b\u7d50\u679c\u306f\u3042\u308a\u307e\u305b\u3093</p> <p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u30e6\u30fc\u30b6\u30fc\u540d\u524d\u7a7a\u9593\u306e\u30b1\u30a4\u30d1\u30d3\u30ea\u30c6\u30a3\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man capabilities\n</code></pre>"},{"location":"chapter6/#_3","title":"\u30de\u30a6\u30f3\u30c8\u540d\u524d\u7a7a\u9593","text":"<p>\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u30de\u30a6\u30f3\u30c8\u540d\u524d\u7a7a\u9593\u306e\u8a73\u7d30\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>$ man mount_namespaces\n</code></pre> <p><code>/proc/self/ns</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c8\u3059\u308b\u3068\u3001\u30d7\u30ed\u30bb\u30b9\u304c\u6301\u3064\u540d\u524d\u7a7a\u9593\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 <pre><code>$ ls -l /proc/self/ns/user /proc/self/ns/mnt\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ls -l /proc/self/ns/user /proc/self/ns/mnt\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ ls -l /proc/self/ns/user /proc/self/ns/mnt\nlrwxrwxrwx. 1 rhel rhel 0 Oct 16 14:46 /proc/self/ns/mnt -&gt; 'mnt:[4026531841]'\nlrwxrwxrwx. 1 rhel rhel 0 Oct 16 14:46 /proc/self/ns/user -&gt; 'user:[4026531837]'\n</code></pre> <p><code>podman unshare</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u3001\u540d\u524d\u7a7a\u9593\u306b\u5165\u3063\u305f\u72b6\u614b\u3067<code>/proc/self/ns</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ea\u30b9\u30c8\u3059\u308b\u3068\u3001\u8b58\u5225\u5b50\u304c\u5909\u308f\u3063\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>$ podman unshare ls -l /proc/self/ns/user /proc/self/ns/mnt\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare ls -l /proc/self/ns/user /proc/self/ns/mnt\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare ls -l /proc/self/ns/user /proc/self/ns/mnt\nlrwxrwxrwx. 1 root root 0 Oct 16 14:49 /proc/self/ns/mnt -&gt; 'mnt:[4026532221]'\nlrwxrwxrwx. 1 root root 0 Oct 16 14:49 /proc/self/ns/user -&gt; 'user:[4026532220]'\n</code></pre> <p>\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001<code>mount</code>\u30b3\u30de\u30f3\u30c9\u3067<code>/etc/shadow</code>\u30d5\u30a1\u30a4\u30eb\u306b\u30d0\u30a4\u30f3\u30c9\u30de\u30a6\u30f3\u30c8\u3092\u884c\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u308b\u653b\u6483\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002 \u540d\u524d\u7a7a\u9593\u306e\u5916\u3067\u306f\u3053\u306e\u8a66\u307f\u306f\u5931\u6557\u3057\u307e\u3059\u3002 <pre><code>$ echo hello &gt; /tmp/testfile\n$ mount --bind /tmp/testfile /etc/shadow\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>echo hello &gt; /tmp/testfile\n</code></pre> <pre><code>mount --bind /tmp/testfile /etc/shadow\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ echo hello &gt; /tmp/testfile\n$ mount --bind /tmp/testfile /etc/shadow\nmount: /etc/shadow: must be superuser to use mount.\n</code></pre> <p>\u540d\u524d\u7a7a\u9593\u5185\u3067\u306f\u540d\u524d\u7a7a\u9593\u306e\u30d7\u30ed\u30bb\u30b9\u306f<code>/etc/shadow</code>\u30d5\u30a1\u30a4\u30eb\u306b\u30d0\u30a4\u30f3\u30c9\u30de\u30a6\u30f3\u30c8\u3067\u304d\u307e\u3059\u3002 <code>podman unshare</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u540d\u524d\u7a7a\u9593\u5185\u3067\u306e\u6319\u52d5\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>$ podman unshare bash -c \"mount -o bind /tmp/testfile /etc/shadow; cat /etc/shadow\"\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman unshare bash -c \"mount -o bind /tmp/testfile /etc/shadow; cat /etc/shadow\"\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman unshare bash -c \"mount -o bind /tmp/testfile /etc/shadow; cat /etc/shadow\"\nhello\n</code></pre>"},{"location":"chapter6/#62-podman","title":"6.2 \u30eb\u30fc\u30c8\u30ec\u30b9Podman\u306e\u5185\u90e8\u69cb\u9020","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ ps -e | grep podman\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>ps -e | grep podman\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ ps -e | grep podman\n   2801 ?        00:00:00 podman pause\n</code></pre> <p>\u8a33\u8a3b</p> <p>Podman v4.5.0\u4ee5\u964d\u3001pause\u30d7\u30ed\u30bb\u30b9\u306e\u5b9f\u884c\u306b<code>catatonit</code>\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u3001\u540c\u69d8\u306e\u78ba\u8a8d\u3092\u884c\u3046\u305f\u3081\u306b\u306f<code>ps -e | grep catatonit</code>\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002 https://github.com/containers/podman/pull/12218</p>"},{"location":"chapter6/#_4","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.2.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p>"},{"location":"chapter6/#oci","title":"OCI\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u8d77\u52d5","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.2.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run -d -p 8080:8080 --name myapp registry.access.redhat.com/ubi8/httpd-24\n</code></pre></p>"},{"location":"chapter6/#_5","title":"\u30b3\u30f3\u30c6\u30ca\u5316\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 6.2.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman stop myapp\n</code></pre></p>"},{"location":"chapter7/","title":"Chapter 7 systemd\u3068\u306e\u7d71\u5408","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e2d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter7/#71-systemd","title":"7.1 \u30b3\u30f3\u30c6\u30ca\u5185\u3067systemd\u3092\u5b9f\u884c\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman pull ubi8-init\n$ podman inspect ubi8-init --format '{{ .Config.Cmd }}'\n</code></pre></p>"},{"location":"chapter7/#systemdpodman","title":"systemd\u30e2\u30fc\u30c9\u306ePodman\u30b3\u30f3\u30c6\u30ca","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.1.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman create --rm --name SystemD -ti --systemd=always ubi8-init sh\n$ podman inspect SystemD --format '{{ .Config.StopSignal}}'\n</code></pre></p> <p>Original <pre><code>$ podman start --attach SystemD\nsh-4.4# mount | grep -e /tmp -e /run | head -2\nsh-4.4# printenv container\n</code></pre></p> <p>Original <pre><code>$ podman run -ti ubi8-init\n</code></pre></p>"},{"location":"chapter7/#systemdapache","title":"systemd\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u306eApache\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u884c","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.1.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ mkdir /tmp/pia-systemd-httpd\n$ cat &lt;&lt; _EOF &gt; /tmp/pia-systemd-httpd/Containerfile\nFROM ubi8-init\nRUN dnf -y install httpd; dnf -y clean all\nRUN systemctl enable httpd.service\n_EOF\n$ podman build -t my-systemd /tmp/pia-systemd-httpd/\n</code></pre></p> <p>Original <pre><code>$ podman run -d --rm -p 8080:80 -v ./html:/var/www/html:Z my-systemd\n$ podman ps\n$ podman logs 7675617e5b8b\n</code></pre></p>"},{"location":"chapter7/#72-journald","title":"7.2 journald\u306b\u3088\u308b\u30ed\u30b0\u3068\u30a4\u30d9\u30f3\u30c8\u306e\u7ba1\u7406","text":""},{"location":"chapter7/#_1","title":"\u30ed\u30b0\u306e\u7ba1\u7406","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.2.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman info --format '{{ .Host.LogDriver }}'\n$ mkdir -p $HOME/.config/containers/containers.conf.d\n$ cat &gt; $HOME/.config/containers/containers.conf.d/log_driver.conf &lt;&lt; _EOF\n[containers]\nlog_driver=\"journald\"\n_EOF\n$ podman info --format '{{ .Host.LogDriver }}'\n</code></pre></p>"},{"location":"chapter7/#_2","title":"\u30a4\u30d9\u30f3\u30c8\u306e\u7ba1\u7406","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.2.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman events --filter event=start --since 1h\n$ podman info --format '{{ .Host.EventLogger }}'\n</code></pre></p>"},{"location":"chapter7/#73","title":"7.3 \u8d77\u52d5\u6642\u306b\u304a\u3051\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u8d77\u52d5","text":""},{"location":"chapter7/#systemdpodman_1","title":"systemd\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u306ePodman\u30b3\u30f3\u30c6\u30ca","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.3.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman create -p 8080:8080 --name myapp quay.io/rhatdan/myimage\n</code></pre></p> <p>Original <pre><code>$ cat $HOME/.config/systemd/user/myapp.service\n</code></pre></p> <p>Original <pre><code>$ systemctl --user daemon-reload\n$ systemctl --user start myapp\n$ systemctl --user status myapp\n</code></pre></p> <p>Original <pre><code>$ systemctl --user stop myapp\n</code></pre></p>"},{"location":"chapter7/#podmansystemd","title":"Podman\u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\u306b\u4f7f\u7528\u3059\u308bsystemd\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u5e03","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.3.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman generate systemd --new myapp &gt; $HOME/.config/systemd/user/myapp-new.service\n$ cat $HOME/.config/systemd/user/myapp-new.service\n</code></pre></p>"},{"location":"chapter7/#podman","title":"Podman\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u66f4\u65b0","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.3.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ systemctl --user stop myapp\n$ podman rm myapp --force -t 0\n</code></pre></p> <p>Original <pre><code>$ podman create --label \"io.containers.autoupdate=registry\" -p 8080:8080 --name myapp quay.io/rhatdan/myimage\n$ podman generate systemd myapp --new &gt; $HOME/.config/systemd/user/myapp-new.service\n</code></pre></p> <p>Original <pre><code>$ systemctl --user daemon-reload\n$ systemctl --user start myapp-new\n</code></pre></p> <p>Original <pre><code>$ podman exec -i myapp bash -c 'cat &gt; /var/www/html/index.html' &lt;&lt; _EOF\n&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to the new Hello World&lt;h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n_EOF\n</code></pre></p> <p>Original <pre><code>$ podman commit myapp quay.io/rhatdan/myimage-new\n$ podman push quay.io/rhatdan/myimage-new quay.io/rhatdan/myimage\n$ podman rmi quay.io/rhatdan/myimage-new\n</code></pre></p> <p>Original <pre><code>$ podman auto-update\n</code></pre></p>"},{"location":"chapter7/#76-podman","title":"7.6 Podman\u30b3\u30f3\u30c6\u30ca\u3068\u30bd\u30b1\u30c3\u30c8\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 7.6\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ systemctl --user stop myapp.service\n$ cat &gt; $HOME/.config/systemd/user/myapp.socket &lt;&lt;_EOF\n[Unit]\nDescription=myapp socket service\nPartOf=myapp.service\n[Socket]\nListenStream=127.0.0.1:8080\n[Install]\nWantedBy=sockets.target\n_EOF\n$ systemctl --user enable --now myapp.socket\n$ podman ps\n</code></pre></p>"},{"location":"chapter8/","title":"Chapter 8 Kubernetes\u3068\u306e\u9023\u643a","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e2d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:15\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter8/#82-podmankubernetes-yaml","title":"8.2 Podman\u3067Kubernetes YAML\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 8.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman rm -f --ignore myapp\n$ podman create -p 8080:8080 --name myapp quay.io/rhatdan/myimage\n</code></pre></p> <p>Original <pre><code>$ podman kube generate myapp &gt; myapp.yaml\n</code></pre></p> <p>Original <pre><code>$ podman image inspect quay.io/rhatdan/myimage | jq .[].User\n</code></pre></p> <p>Original <pre><code>$ podman kube generate --type deployment --replicas 2 myapp\n</code></pre></p>"},{"location":"chapter8/#83-kubernetes-yamlpodmanpod","title":"8.3 Kubernetes YAML\u304b\u3089Podman\u306ePod\u3068\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 8.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman rm -f --ignore myapp\n$ podman kube play myapp.yaml\n</code></pre></p>"},{"location":"chapter8/#kubernetes-yamlpod","title":"Kubernetes YAML\u30d5\u30a1\u30a4\u30eb\u306b\u57fa\u3065\u3044\u3066Pod\u3068\u30b3\u30f3\u30c6\u30ca\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 8.3.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <pre><code>$ podman kube down myapp.yaml\n</code></pre> <pre><code>$ podman pod ps\n</code></pre> <pre><code>$ podman kube play myapp.yaml\n</code></pre>"},{"location":"chapter8/#podmankuberentes-yaml","title":"Podman\u3068Kuberentes YAML\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 8.3.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ cat &gt; ./Containerfile &lt;&lt; _EOF\nFROM ubi8-init\nRUN dnf -y install httpd; dnf -y clean all\nRUN systemctl enable httpd.service\n_EOF\n$ podman pod rm --all --force\n$ podman rm --all --force\n$ podman build -t mysystemd .\n</code></pre></p> <p>Original <pre><code>$ podman create --rm -p 8080:80 --name myapp -v ./html:/var/www/html:Z mysystemd\n$ podman kube generate myapp &gt; myapp2.yaml\n$ cat myapp2.yaml\n</code></pre></p> <p>Original <pre><code>$ podman pod rm --all --force\n$ podman rm --all --force\n$ podman rmi mysystemd\n</code></pre></p> <p>Original <pre><code>$ mkdir mysystemd\n$ mv Containerfile mysystemd/\n$ podman kube play --build myapp2.yaml\n</code></pre></p>"},{"location":"chapter8/#84-podman","title":"8.4 \u30b3\u30f3\u30c6\u30ca\u5185\u3067Podman\u3092\u52d5\u304b\u3059","text":""},{"location":"chapter8/#podmanpodman","title":"Podman\u30b3\u30f3\u30c6\u30ca\u5185\u3067Podman\u3092\u5b9f\u884c\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fChapter 8.4.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman run --privileged quay.io/podman/stable podman version\n</code></pre></p> <p>Original <pre><code>$ podman run --user podman quay.io/podman/stable podman version\n$ podman run --cap-drop=all --cap-add CAP_SETUID,CAP_SETGID --user podman quay.io/podman/stable podman version\n</code></pre></p>"},{"location":"chapter9/","title":"Chapter 9 \u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u306ePodman","text":"<ul> <li>\u30ec\u30d9\u30eb:\u4e2d\u7d1a</li> <li>\u898b\u8fbc\u307f\u6642\u9593:30\u5206</li> <li>\u30b3\u30f3\u30c6\u30f3\u30c4</li> </ul>"},{"location":"chapter9/#91-podman","title":"9.1 Podman\u30b5\u30fc\u30d3\u30b9\u306e\u7d39\u4ecb","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman system service\n</code></pre></p>"},{"location":"chapter9/#systemd","title":"systemd\u30b5\u30fc\u30d3\u30b9","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.1.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ systemctl --user enable podman.socket\n$ systemctl --user start podman.socket\n$ ls $XDG_RUNTIME_DIR/podman/podman.sock\n</code></pre></p> <p>Original <pre><code>$ curl -s --unix-socket $XDG_RUNTIME_DIR/podman/podman.sock http://d/v1.0.0/libpod/version | jq\n</code></pre></p>"},{"location":"chapter9/#92-podmanapi","title":"9.2 Podman\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308bAPI","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ curl -s --unix-socket $XDG_RUNTIME_DIR/podman/podman.sock http://d/v1.0.0/libpod/images/json | jq\n</code></pre></p> <p>Original <pre><code>$ podman pod create --name mypod\n$ curl -s --unix-socket $XDG_RUNTIME_DIR/podman/podman.sock http://d/v1.0.0/libpod/pods/json | jq\n$ curl -s --unix-socket $XDG_RUNTIME_DIR/podman/podman.sock http://d/v1.0.0/pods/json\n</code></pre></p>"},{"location":"chapter9/#93-podmanpython","title":"9.3 Podman\u3068\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306ePython\u30e9\u30a4\u30d6\u30e9\u30ea","text":""},{"location":"chapter9/#podman-apidocker-py","title":"Podman API\u3067\u306edocker-py\u306e\u4f7f\u7528","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.3.1\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sudo dnf install -y python-docker\n</code></pre></p> <p>Original <pre><code>$ cat &gt; images.py &lt;&lt; _EOF\nimport docker\nclient=docker.DockerClient(base_url='unix:/run/user/1000/podman/podman.sock')\nprint(client.images.list(all=True))\n_EOF\n$ python images.py\n</code></pre></p>"},{"location":"chapter9/#podman-pypodman-api","title":"podman-py\u3068Podman API\u306e\u4f7f\u7528","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.3.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sudo dnf install -y python-podman\n$ cat &gt; podman-images.py &lt;&lt; _EOF\nimport podman\nclient=podman.PodmanClient()\nprint(client.images.list())\n_EOF\n$ python podman-images.py\n</code></pre></p> <p>Original <pre><code>$ cat &gt;&gt; podman-images.py &lt;&lt; _EOF\nfor i in client.pods.list():\n  print(i.attrs)\n_EOF\n$ python podman-images.py\n</code></pre></p>"},{"location":"chapter9/#94-podmandocker-compose","title":"9.4 Podman\u30b5\u30fc\u30d3\u30b9\u3067docker-compose\u3092\u4f7f\u7528\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sudo dnf -y install docker-compose\n$ systemctl --user start podman.socket\n$ curl -H \"Content-Type: application/json\" --unix-socket $XDG_RUNTIME_DIR/podman/podman.sock http://localhost/_ping\nOK\n</code></pre></p> <p>Original <pre><code>$ export DOCKER_HOST=unix://$XDG_RUNTIME_DIR/podman/podman.sock\n$ mkdir example\n$ mv ./html example\n$ cd example\n$ cat &gt; docker-compose.yaml &lt;&lt; _EOF\nversion: \"3.7\"\nservices:\n  myapp:\n    image: quay.io/rhatdan/myimage:latest\n    volumes:\n      - ./html:/var/www/html\n      - myapp_vol:/vol\n    ports:\n      - 8080:80\nvolumes:\n  myapp_vol: {}\n_EOF\n</code></pre></p> <p>Original <pre><code>$ podman pod rm --all --force\n$ podman rm --all --force\n$ podman rmi --all --force\n$ podman volume rm --all --force\n</code></pre></p> <p>Original <pre><code>$ docker-compose up\n</code></pre></p> <p>Original <pre><code>$ podman ps --format \"{{.ID}} {{.Image}} {{.Ports}} {{.Names}}\"\n$ podman volume ls\n</code></pre></p> <p>Original <pre><code>^C\n$ podman ps --format \"{{.ID}} {{.Image}} {{.Ports}} {{.Names}}\"\n$ podman ps -a --format \"{{.ID}} {{.Image}} {{.Ports}} {{.Names}}\"\n$ docker-compose down\n$ podman ps -a --format \"{{.ID}} {{.Image}} {{.Ports}} {{.Names}}\"\n</code></pre></p>"},{"location":"chapter9/#95-podman-remote","title":"9.5 podman --remote","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.5\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman --remote version\n$ podman --remote run ubi8 echo hi\n</code></pre></p>"},{"location":"chapter9/#_1","title":"\u30ea\u30e2\u30fc\u30c8\u63a5\u7d9a","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.5.2\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ sudo systemctl enable --now sshd\n$ systemctl --user enable --now podman.socket\n$ sudo loginctl enable-linger $USER\n$ podman --remote info\n</code></pre></p>"},{"location":"chapter9/#ssh","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30de\u30b7\u30f3\u306bSSH\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.5.3\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ ssh-keygen -t ed25519\n$ ssh-copy-id myuser@192.168.122.\n</code></pre></p>"},{"location":"chapter9/#_2","title":"\u63a5\u7d9a\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u672c\u66f8 9.5.4\u306b\u8a72\u5f53\u3057\u307e\u3059)</p> <p>Original <pre><code>$ podman system connection add server1 --identity ~/.ssh/id_ed25519 ssh://myuser@192.168.122.1/run/user/1000/podman/podman.sock\n$ podman system connection list\n$ podman --remote info\n</code></pre></p>"},{"location":"getting-started/","title":"\u958b\u59cb\u65b9\u6cd5","text":""},{"location":"getting-started/#_2","title":"\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u69cb\u6210","text":"<p>\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u672c\u30b5\u30a4\u30c8\uff09\u3068\u5b9f\u884c\u74b0\u5883\uff08Red Hat Enterprise Linux open lab\uff09\u304b\u3089\u69cb\u6210\u3055\u308c\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u3067\u3059\u3002</p> <ul> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: Podman\u30cf\u30f3\u30ba\u30aa\u30f3:\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</li> <li>\u5b9f\u884c\u74b0\u5883: Red Hat Enterprise Linux open lab</li> </ul> <p>\u4f7f\u7528\u3059\u308b\u30d6\u30e9\u30a6\u30b6\u30672\u3064\u306e\u30da\u30fc\u30b8\u3092\u958b\u304d\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u306a\u304c\u3089\u5b9f\u884c\u74b0\u5883\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308b\u4f53\u9a13\u578b\u306e\u5b66\u7fd2\u30b3\u30f3\u30c6\u30f3\u30c4\u3067\u3059\u3002</p>"},{"location":"getting-started/#_3","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u9032\u3081\u65b9","text":"<p>\u8d64\u306e\u67a0\u306e\u90e8\u5206\u304c1\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u7bc4\u56f2\u3067\u3059\u3002\u5b9f\u884c\u3059\u308b\u5185\u5bb9\u3068\u30b3\u30de\u30f3\u30c9\u4f8b\u306e\u7d39\u4ecb\u306b\u7d9a\u3044\u3066\u3001\u30b3\u30d4\u30da\u7528\u306e\u30b3\u30de\u30f3\u30c9\u4f8b\u304c\u3042\u308a\u307e\u3059\u3002\u300c\u30a2\u30a4\u30b3\u30f3\u300d\u3092\u62bc\u3059\u3068\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30de\u30f3\u30c9\u304c\u30b3\u30d4\u30fc\u3055\u308c\u307e\u3059\u306e\u3067\u3001OpenLab\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067\u30b3\u30de\u30f3\u30c9\u3092\u30da\u30fc\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002 \u300c\u51fa\u529b\u7d50\u679c\u300d\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u62bc\u3059\u3068\u30b3\u30de\u30f3\u30c9\u7d50\u679c\u304c\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\u81ea\u8eab\u306e\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306e\u7d50\u679c\u3068\u6bd4\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><code>podman run</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001<code>ubi8/httpd-24</code> \u30a4\u30e1\u30fc\u30b8\u3092\u30d7\u30eb\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059 <pre><code>$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\n</code></pre></p> <p>(\u30b3\u30d4\u30da\u7528) <pre><code>podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\n</code></pre></p> \u51fa\u529b\u7d50\u679c <pre><code>$ podman run -ti --rm registry.access.redhat.com/ubi8/httpd-24 bash\nTrying to pull registry.access.redhat.com/ubi8/httpd-24:latest...\nGetting image source signatures\nChecking if image destination supports signatures\nCopying blob 9ece777c9660 done  \nCopying blob 70de3d8fc2c6 done  \nCopying blob b653248f5bcb done  \nCopying config c4127096ce done  \nWriting manifest to image destination\nStoring signatures\nbash-4.4$ \n</code></pre> <ul> <li>\u30b3\u30de\u30f3\u30c9\u304c\u8907\u6570\u884c\u3042\u308a\u30b3\u30d4\u30da\u90e8\u5206\u304c\u8907\u6570\u306b\u5206\u304b\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u30011\u3064\u305a\u3064\u9806\u306b\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059</li> </ul>"},{"location":"getting-started/#_4","title":"\u30d7\u30ed\u30f3\u30d7\u30c8\u306e\u8868\u8a18\u306b\u3064\u3044\u3066","text":"<p>\u30d7\u30ed\u30f3\u30d7\u30c8\u306f\u5b9f\u969b\u306b\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059 \u30e9\u30dc\u74b0\u5883\u8d77\u52d5\u76f4\u5f8c\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u8868\u793a<pre><code>root@rhel:~# \n</code></pre> \u30cf\u30f3\u30ba\u30aa\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u4e0a\u3067\u306f\u30d7\u30ed\u30f3\u30d7\u30c8\u8a18\u53f7\u4ee5\u5916\u306f\u7701\u7565\u3057\u3066\u8868\u8a18\u3057\u307e\u3059\u3002</p> \u30eb\u30fc\u30c8\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306e\u8868\u8a18<pre><code>#\n</code></pre> \u30eb\u30fc\u30c8\u30ec\u30b9\u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306e\u8868\u8a18<pre><code>$\n</code></pre>"},{"location":"getting-started/#_5","title":"\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3078\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u8a2d\u554f\u306b\u3064\u3044\u3066","text":"<p>\u672c\u66f8\u306e\u30b3\u30de\u30f3\u30c9\u4f8b\u306b\u306f\u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\uff08quay.io\uff09\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u7b87\u6240\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\u672c\u66f8\u306e\u30b3\u30de\u30f3\u30c9\u4f8b\u306e\u307e\u307e\u3067\u306f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001\u3054\u81ea\u8eab\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u8aad\u307f\u66ff\u3048\u3066\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u30b3\u30f3\u30c6\u30ca\u30ec\u30b8\u30b9\u30c8\u30ea\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3001\u30d7\u30c3\u30b7\u30e5\u306f\u8aad\u307f\u98db\u3070\u3057\u3066\u9802\u3044\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p>"},{"location":"getting-started/#_6","title":"\u305d\u306e\u4ed6\u3001\u672c\u66f8\u3068\u306e\u5dee\u5206","text":"<ul> <li>\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4e2d\u306b\u306f\u300c\u30aa\u30d7\u30b7\u30e7\u30f3\u554f\u984c\u300d\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\uff08\u672c\u66f8\u3067/home/dwalsh\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\uff09</li> <li>\u30cf\u30f3\u30ba\u30aa\u30f3\u3068\u3057\u3066\u306f\u7fd2\u5f97\u52b9\u679c\u304c\u8584\u3044\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u7701\u7565\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059</li> </ul>"},{"location":"getting-started/#_7","title":"\u30cf\u30f3\u30ba\u30aa\u30f3\u74b0\u5883\u306e\u8d77\u52d5","text":"<p>Labs\u306e\u8d77\u52d5\u65b9\u6cd5</p> <p></p> <p>\u8d77\u52d5\u5f8c</p> <p>60\u5206\u9593\u4f7f\u7528\u3067\u304d\u307e\u3059\u300260\u5206\u7d4c\u904e\u5f8c\u306f\u518d\u5ea6\u30e9\u30dc\u74b0\u5883\u3092\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u969b\u3001\u524d\u56de\u306e\u30c7\u30fc\u30bf\u306f\u5f15\u304d\u7d99\u304c\u308c\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002 </p> <p>\u3092\u62bc\u3059\u3068\u30e1\u30cb\u30e5\u30fc\u304c\u9589\u3058\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u304c\u5e83\u304f\u306a\u308a\u307e\u3059 </p> <p>\u5b9f\u884c\u74b0\u5883\u306ePodman,Buildah,Skopeo\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\uff082023/9/26\u6642\u70b9\uff09 <pre><code># podman version\nClient:       Podman Engine\nVersion:      4.4.1\nAPI Version:  4.4.1\nGo Version:   go1.19.6\nBuilt:        Wed Apr 26 16:50:28 2023\nOS/Arch:      linux/amd64\n</code></pre></p> <pre><code># buildah version\nVersion:         1.29.1\nGo Version:      go1.19.6\nImage Spec:      1.0.2-dev\nRuntime Spec:    1.0.2-dev\nCNI Spec:        1.0.0\nlibcni Version:  v1.1.2\nimage Version:   5.24.1\nGit Commit:      \nBuilt:           Mon Apr  3 08:34:42 2023\nOS/Arch:         linux/amd64\nBuildPlatform:   linux/amd64\n</code></pre> <p>skopeo\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002<code>dnf</code>\u30b3\u30de\u30f3\u30c9\u3067\u8ffd\u52a0\u304c\u53ef\u80fd\u3067\u3059\u3002 <pre><code># dnf install skopeo -y\n# skopeo -v\nskopeo version 1.11.2-dev\n</code></pre></p>"}]}